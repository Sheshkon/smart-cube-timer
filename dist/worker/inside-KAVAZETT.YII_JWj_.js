var Qn=Object.defineProperty;var Nt=e=>{throw TypeError(e)};var Vn=(e,t,n)=>t in e?Qn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var y=(e,t,n)=>Vn(e,typeof t!="symbol"?t+"":t,n),at=(e,t,n)=>t.has(e)||Nt("Cannot "+n);var s=(e,t,n)=>(at(e,t,"read from private field"),n?n.call(e):t.get(e)),v=(e,t,n)=>t.has(e)?Nt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),x=(e,t,n,r)=>(at(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),O=(e,t,n)=>(at(e,t,"access private method"),n);var ot=(e,t,n,r)=>({set _(i){x(e,t,i,n)},get _(){return s(e,t,r)}});import{e as Hn}from"./search-worker-entry.FSN7G5h8.js";var tn=class{is(e){return this instanceof e}as(e){return this instanceof e?this:null}},se=class extends tn{constructor(){super()}get log(){return console.log.bind(console,this,this.toString())}};function Zn(e,t=!0){if(!t)return e;switch(e){case 1:return-1;case-1:return 1}}function jn(e,t){return t===-1?Array.from(e).reverse():e}function Jn(e){return Array.from(e).reverse()}var ft=2147483647,pt="2^31 - 1",Yn=-2147483648,me,fe,we,K=(we=class extends se{constructor(n,r){super();v(this,me);v(this,fe);x(this,me,Ce(n)),x(this,fe,Ce(r))}get A(){return s(this,me)}get B(){return s(this,fe)}isIdentical(n){const r=n.as(we);return!!(r!=null&&r.A.isIdentical(this.A)&&(r!=null&&r.B.isIdentical(this.B)))}invert(){return new we(s(this,fe),s(this,me))}*experimentalExpand(n=1,r){r??(r=1/0),r===0?yield n===1?this:this.invert():n===1?(yield*this.A.experimentalExpand(1,r-1),yield*this.B.experimentalExpand(1,r-1),yield*this.A.experimentalExpand(-1,r-1),yield*this.B.experimentalExpand(-1,r-1)):(yield*this.B.experimentalExpand(1,r-1),yield*this.A.experimentalExpand(1,r-1),yield*this.B.experimentalExpand(-1,r-1),yield*this.A.experimentalExpand(-1,r-1))}toString(n){return`[${s(this,me).toString(n)}, ${s(this,fe).toString(n)}]`}},me=new WeakMap,fe=new WeakMap,we),Le,Fe,ge,G=(ge=class extends se{constructor(n,r){super();v(this,Le);v(this,Fe);x(this,Le,Ce(n)),x(this,Fe,Ce(r))}get A(){return s(this,Le)}get B(){return s(this,Fe)}isIdentical(n){const r=n.as(ge);return!!(r!=null&&r.A.isIdentical(this.A)&&(r!=null&&r.B.isIdentical(this.B)))}invert(){return new ge(s(this,Le),s(this,Fe).invert())}*experimentalExpand(n,r){r??(r=1/0),r===0?yield n===1?this:this.invert():(yield*this.A.experimentalExpand(1,r-1),yield*this.B.experimentalExpand(n,r-1),yield*this.A.experimentalExpand(-1,r-1))}toString(n){return`[${this.A.toString(n)}: ${this.B.toString(n)}]`}},Le=new WeakMap,Fe=new WeakMap,ge),re,be,_e=(be=class extends se{constructor(n){super();v(this,re);if(n.includes(`
`)||n.includes("\r"))throw new Error("LineComment cannot contain newline");x(this,re,n)}get text(){return s(this,re)}isIdentical(n){const r=n;return n.is(be)&&s(this,re)===s(r,re)}invert(){return this}*experimentalExpand(n=1,r=1/0){yield this}toString(n){return`//${s(this,re)}`}},re=new WeakMap,be),he=class nn extends se{toString(t){return`
`}isIdentical(t){return t.is(nn)}invert(){return this}*experimentalExpand(t=1,n=1/0){yield this}},C=class rn extends se{constructor(){super(...arguments);y(this,"experimentalNISSGrouping")}toString(n){return"."}isIdentical(n){return n.is(rn)}invert(){return this}*experimentalExpand(n=1,r=1/0){yield this}},pe,Zt,yt=(Zt=class{constructor(){v(this,pe,[])}push(e){s(this,pe).push(e)}experimentalPushAlg(e){for(const t of e.childAlgNodes())this.push(t)}experimentalNumAlgNodes(){return s(this,pe).length}toAlg(){return new p(s(this,pe))}reset(){x(this,pe,[])}},pe=new WeakMap,Zt);function We(e,t){return e?parseInt(e):t}var Bt=/^(\d+)?('?)/,Xn=/^[_\dA-Za-z]/,er=/^((([1-9]\d*)-)?([1-9]\d*))?([_A-Za-z]+)/,tr=/^[^\n]*/,nr=/^(-?\d+), ?/,rr=/^(-?\d+)\)/;function an(e){return new Dt().parseAlg(e)}function ir(e){return new Dt().parseMove(e)}function ar(e){return new Dt().parseQuantumMove(e)}var Te=Symbol("startCharIndex"),Ue=Symbol("endCharIndex");function b(e,t,n){const r=e;return r[Te]=t,r[Ue]=n,r}function or(e,t){return Te in e&&(t[Te]=e[Te]),Ue in e&&(t[Ue]=e[Ue]),t}var P,h,Ee,jt,Dt=(jt=class{constructor(){v(this,P,"");v(this,h,0);v(this,Ee,[])}parseAlg(e){x(this,P,e),x(this,h,0);const t=this.parseAlgWithStopping([]);this.mustBeAtEndOfInput();const n=Array.from(t.childAlgNodes());if(s(this,Ee).length>0)for(const u of s(this,Ee).reverse())n.push(u);const r=new p(n),{[Te]:i,[Ue]:o}=t;return b(r,i,o),r}parseMove(e){x(this,P,e),x(this,h,0);const t=this.parseMoveImpl();return this.mustBeAtEndOfInput(),t}parseQuantumMove(e){x(this,P,e),x(this,h,0);const t=this.parseQuantumMoveImpl();return this.mustBeAtEndOfInput(),t}mustBeAtEndOfInput(){if(s(this,h)!==s(this,P).length)throw new Error("parsing unexpectedly ended early")}parseAlgWithStopping(e){let t=s(this,h),n=s(this,h);const r=new yt;let i=!1;const o=u=>{if(i)throw new Error(`Unexpected character at index ${u}. Are you missing a space?`)};e:for(;s(this,h)<s(this,P).length;){const u=s(this,h);if(e.includes(s(this,P)[s(this,h)]))return b(r.toAlg(),t,n);if(this.tryConsumeNext(" ")){i=!1,r.experimentalNumAlgNodes()===0&&(t=s(this,h));continue e}else if(Xn.test(s(this,P)[s(this,h)])){o(u);const c=this.parseMoveImpl();r.push(c),i=!0,n=s(this,h);continue e}else if(this.tryConsumeNext("(")){o(u);const c=this.tryRegex(nr);if(c){const m=c[1],l=s(this,h),d=this.parseRegex(rr),g=b(new a(new X("U_SQ_"),parseInt(m)),u+1,u+1+m.length),f=b(new a(new X("D_SQ_"),parseInt(d[1])),l,s(this,h)-1),S=b(new p([g,f]),u+1,s(this,h)-1);r.push(b(new W(S),u,s(this,h))),i=!0,n=s(this,h);continue e}else{const m=this.parseAlgWithStopping([")"]);this.mustConsumeNext(")");const l=this.parseAmount();r.push(b(new W(m,l),u,s(this,h))),i=!0,n=s(this,h);continue e}}else if(this.tryConsumeNext("^")){this.mustConsumeNext("(");const c=this.parseAlgWithStopping([")"]);this.popNext();const m=new W(c,-1),l=new C;m.experimentalNISSPlaceholder=l,l.experimentalNISSGrouping=m,s(this,Ee).push(m),r.push(l)}else if(this.tryConsumeNext("[")){o(u);const c=this.parseAlgWithStopping([",",":"]),m=this.popNext(),l=this.parseAlgWithStopping(["]"]);this.mustConsumeNext("]");let d;switch(m){case":":{d=b(new G(c,l),u,s(this,h)),i=!0,n=s(this,h);break}case",":{d=b(new K(c,l),u,s(this,h)),i=!0,n=s(this,h);break}default:throw new Error("unexpected parsing error")}const g=s(this,h),f=this.parseAmount();if(f===1)r.push(d);else{const S=b(new p([d]),u,g),w=b(new W(S,f),u,s(this,h));r.push(w)}i=!0,n=s(this,h);continue e}else if(this.tryConsumeNext(`
`)){r.push(b(new he,u,s(this,h))),i=!1,n=s(this,h);continue e}else if(this.tryConsumeNext("/"))if(this.tryConsumeNext("/")){o(u);const[c]=this.parseRegex(tr);r.push(b(new _e(c),u,s(this,h))),i=!1,n=s(this,h);continue e}else{r.push(b(new a("_SLASH_"),u,s(this,h))),i=!0,n=s(this,h);continue e}else if(this.tryConsumeNext(".")){o(u),r.push(b(new C,u,s(this,h))),i=!0,n=s(this,h);continue e}else throw new Error(`Unexpected character: ${this.popNext()}`)}if(s(this,h)!==s(this,P).length)throw new Error("did not finish parsing?");if(e.length>0)throw new Error("expected stopping");return b(r.toAlg(),t,n)}parseQuantumMoveImpl(){const[,,,e,t,n]=this.parseRegex(er);return new X(n,We(t,void 0),We(e,void 0))}parseMoveImpl(){const e=s(this,h);if(this.tryConsumeNext("/"))return b(new a("_SLASH_"),e,s(this,h));let t=this.parseQuantumMoveImpl(),[n,r]=this.parseAmountAndTrackEmptyAbsAmount();const i=this.parseMoveSuffix();if(i){if(n<0)throw new Error("uh-oh");if((i==="++"||i==="--")&&n!==1)throw new Error("Pochmann ++ or -- moves cannot have an amount other than 1.");if((i==="++"||i==="--")&&!r)throw new Error("Pochmann ++ or -- moves cannot have an amount written as a number.");if((i==="+"||i==="-")&&r)throw new Error("Clock dial moves must have an amount written as a natural number followed by + or -.");i.startsWith("+")&&(t=t.modified({family:`${t.family}_${i==="+"?"PLUS":"PLUSPLUS"}_`})),i.startsWith("-")&&(t=t.modified({family:`${t.family}_${i==="-"?"PLUS":"PLUSPLUS"}_`}),n*=-1)}return b(new a(t,n),e,s(this,h))}parseMoveSuffix(){return this.tryConsumeNext("+")?this.tryConsumeNext("+")?"++":"+":this.tryConsumeNext("-")?this.tryConsumeNext("-")?"--":"-":null}parseAmountAndTrackEmptyAbsAmount(){const e=s(this,h),[,t,n]=this.parseRegex(Bt);if(t!=null&&t.startsWith("0")&&t!=="0")throw new Error(`Error at char index ${e}: An amount can only start with 0 if it's exactly the digit 0.`);return[We(t,1)*(n==="'"?-1:1),!t]}parseAmount(){const e=s(this,h),[,t,n]=this.parseRegex(Bt);if(t!=null&&t.startsWith("0")&&t!=="0")throw new Error(`Error at char index ${e}: An amount number can only start with 0 if it's exactly the digit 0.`);return We(t,1)*(n==="'"?-1:1)}parseRegex(e){const t=e.exec(this.remaining());if(t===null)throw new Error("internal parsing error");return x(this,h,s(this,h)+t[0].length),t}tryRegex(e){const t=e.exec(this.remaining());return t===null?null:(x(this,h,s(this,h)+t[0].length),t)}remaining(){return s(this,P).slice(s(this,h))}popNext(){const e=s(this,P)[s(this,h)];return ot(this,h)._++,e}tryConsumeNext(e){return s(this,P)[s(this,h)]===e?(ot(this,h)._++,!0):!1}mustConsumeNext(e){const t=this.popNext();if(t!==e)throw new Error(`expected \`${e}\` while parsing, encountered ${t}`);return t}},P=new WeakMap,h=new WeakMap,Ee=new WeakMap,jt),zt=new Set;function on(e){zt.has(e)||(console.warn(e),zt.add(e))}var dt=class{constructor(e,t=1){y(this,"quantum");y(this,"amount");if(this.quantum=e,this.amount=t,!Number.isInteger(this.amount)||this.amount<Yn||this.amount>ft)throw new Error(`AlgNode amount absolute value must be a non-negative integer below ${pt}.`)}suffix(){let e="";const t=Math.abs(this.amount);return t!==1&&(e+=t),this.amount<0&&(e+="'"),e}isIdentical(e){return this.quantum.isIdentical(e.quantum)&&this.amount===e.amount}*experimentalExpand(e,t){const n=Math.abs(this.amount),r=Zn(e,this.amount<0);for(let i=0;i<n;i++)yield*this.quantum.experimentalExpand(r,t)}},Y,B,z,xe,X=(xe=class extends tn{constructor(n,r,i){super();v(this,Y);v(this,B);v(this,z);if(x(this,Y,n),x(this,B,r??null),x(this,z,i??null),Object.freeze(this),s(this,B)!==null&&(!Number.isInteger(s(this,B))||s(this,B)<1||s(this,B)>ft))throw new Error(`QuantumMove inner layer must be a positive integer below ${pt}.`);if(s(this,z)!==null&&(!Number.isInteger(s(this,z))||s(this,z)<1||s(this,z)>ft))throw new Error(`QuantumMove outer layer must be a positive integer below ${pt}.`);if(s(this,z)!==null&&s(this,B)!==null&&s(this,B)<=s(this,z))throw new Error("QuantumMove outer layer must be smaller than inner layer.");if(s(this,z)!==null&&s(this,B)===null)throw new Error("QuantumMove with an outer layer must have an inner layer")}static fromString(n){return ar(n)}modified(n){return new xe(n.family??s(this,Y),n.innerLayer??s(this,B),n.outerLayer??s(this,z))}isIdentical(n){const r=n;return n.is(xe)&&s(this,Y)===s(r,Y)&&s(this,B)===s(r,B)&&s(this,z)===s(r,z)}get family(){return s(this,Y)}get outerLayer(){return s(this,z)}get innerLayer(){return s(this,B)}experimentalExpand(){throw new Error("experimentalExpand() cannot be called on a `QuantumMove` directly.")}toString(n){let r=s(this,Y);return s(this,B)!==null&&(r=String(s(this,B))+r,s(this,z)!==null&&(r=`${String(s(this,z))}-${r}`)),r}},Y=new WeakMap,B=new WeakMap,z=new WeakMap,xe),N,He,Me,ht,Q,a=(Q=class extends se{constructor(...n){super();v(this,Me);v(this,N);v(this,He);if(typeof n[0]=="string")if(n[1]??null){x(this,N,new dt(X.fromString(n[0]),n[1]));return}else return Q.fromString(n[0]);x(this,N,new dt(n[0],n[1]))}isIdentical(n){const r=n.as(Q);return!!r&&s(this,N).isIdentical(s(r,N))}invert(){return or(this,new Q(s(this,N).quantum,O(this,Me,ht).call(this)?this.amount:-this.amount))}*experimentalExpand(n=1){n===1?yield this:yield this.modified({amount:-this.amount})}get quantum(){return s(this,N).quantum}modified(n){return new Q(s(this,N).quantum.modified(n),n.amount??this.amount)}static fromString(n){return ir(n)}get amount(){return s(this,N).amount}get type(){return on("deprecated: type"),"blockMove"}get family(){return s(this,N).quantum.family??void 0}get outerLayer(){return s(this,N).quantum.outerLayer??void 0}get innerLayer(){return s(this,N).quantum.innerLayer??void 0}toString(n){if((n==null?void 0:n.notation)!=="LGN"){if(O(this,Me,ht).call(this))return"/";if(this.family.endsWith("_PLUS_"))return s(this,N).quantum.toString().slice(0,-6)+Math.abs(this.amount)+(this.amount<0?"-":"+");if(this.family.endsWith("_PLUSPLUS_")){const r=Math.abs(this.amount);return s(this,N).quantum.toString().slice(0,-10)+(r===1?"":r)+(this.amount<0?"--":"++")}}return s(this,N).quantum.toString(n)+s(this,N).suffix()}},N=new WeakMap,He=new WeakMap,Me=new WeakSet,ht=function(){return this.isIdentical(s(this,He)??x(this,He,new Q("_SLASH_")))},Q),sr=class{constructor(){y(this,"quantumU_SQ_",null);y(this,"quantumD_SQ_",null)}format(e,t){if((t==null?void 0:t.notation)==="LGN"||e.amount!==1)return null;const n=this.tuple(e);return n?`(${n.map(r=>r.amount).join(", ")})`:null}tuple(e){var n,r;if(e.amount!==1)return null;this.quantumU_SQ_||(this.quantumU_SQ_=new X("U_SQ_")),this.quantumD_SQ_||(this.quantumD_SQ_=new X("D_SQ_"));const t=e.alg;if(t.experimentalNumChildAlgNodes()===2){const[i,o]=t.childAlgNodes();if((n=i.as(a))!=null&&n.quantum.isIdentical(this.quantumU_SQ_)&&((r=o.as(a))!=null&&r.quantum.isIdentical(this.quantumD_SQ_)))return[i,o]}return null}},st=new sr,A,Ze,sn,ae,W=(ae=class extends se{constructor(n,r){super();v(this,Ze);v(this,A);y(this,"experimentalNISSPlaceholder");const i=Ce(n);x(this,A,new dt(i,r))}isIdentical(n){const r=n;return n.is(ae)&&s(this,A).isIdentical(s(r,A))}get alg(){return s(this,A).quantum}get amount(){return s(this,A).amount}get experimentalRepetitionSuffix(){return s(this,A).suffix()}invert(){const n=st.tuple(this);if(n){const[r,i]=n;return new ae(new p([r.invert(),i.invert()]))}return new ae(s(this,A).quantum,-s(this,A).amount)}*experimentalExpand(n=1,r){r??(r=1/0),r===0?yield n===1?this:this.invert():yield*s(this,A).experimentalExpand(n,r-1)}static fromString(){throw new Error("unimplemented")}toString(n){return st.format(this,n)??`${O(this,Ze,sn).call(this,n)}${s(this,A).suffix()}`}experimentalAsSquare1Tuple(){return st.tuple(this)}},A=new WeakMap,Ze=new WeakSet,sn=function(n){const r=s(this,A).quantum.toString(n),i=this.alg.childAlgNodes(),{value:o}=i.next();return i.next().done&&(o!=null&&o.is(K)||o!=null&&o.is(G))?r:`(${r})`},ae);function J(e,t){return e instanceof t}function ur(e){return J(e,W)||J(e,_e)||J(e,K)||J(e,G)||J(e,a)||J(e,he)||J(e,C)}function un(e,t,n){if(t.is(W))return e.traverseGrouping(t,n);if(t.is(a))return e.traverseMove(t,n);if(t.is(K))return e.traverseCommutator(t,n);if(t.is(G))return e.traverseConjugate(t,n);if(t.is(C))return e.traversePause(t,n);if(t.is(he))return e.traverseNewline(t,n);if(t.is(_e))return e.traverseLineComment(t,n);throw new Error("unknown AlgNode")}function ln(e){if(e.is(W)||e.is(a)||e.is(K)||e.is(G)||e.is(C)||e.is(he)||e.is(_e))return e;throw new Error("internal error: expected AlgNode")}var St=class{traverseAlgNode(e,t){return un(this,e,t)}traverseIntoAlgNode(e,t){return ln(this.traverseAlgNode(e,t))}},Rt=class extends St{traverseAlgNode(e){return un(this,e,void 0)}traverseIntoAlgNode(e){return ln(this.traverseAlgNode(e))}};function ue(e,t){const n=new e(...t??[]);return n.traverseAlg.bind(n)}var lr="any-direction",cn=class{constructor(e={}){this.config=e}cancelQuantum(){const{cancel:e}=this.config;return e===!0?lr:e===!1?"none":(e==null?void 0:e.directional)??"none"}cancelAny(){return this.config.cancel&&this.cancelQuantum()!=="none"}cancelPuzzleSpecificModWrap(){const{cancel:e}=this.config;return e===!0||e===!1?"canonical-centered":e!=null&&e.puzzleSpecificModWrap?e==null?void 0:e.puzzleSpecificModWrap:(e==null?void 0:e.directional)==="same-direction"?"preserve-sign":"canonical-centered"}puzzleSpecificSimplifyOptions(){var e;return((e=this.config.puzzleLoader)==null?void 0:e.puzzleSpecificSimplifyOptions)??this.config.puzzleSpecificSimplifyOptions}};function cr(e,t){return e*Math.sign(t.amount)>=0}function mr(e,t,n=0){return((e-n)%t+t)%t+n}function fr(e,t,n){var m;const r=new cn(n),i=Array.from(e.childAlgNodes());let o=[t];function u(){return new p([...i,...o])}function c(l){var w;if(r.cancelPuzzleSpecificModWrap()==="none")return l;const d=(w=r.puzzleSpecificSimplifyOptions())==null?void 0:w.quantumMoveOrder;if(!d)return l;const g=d(t.quantum);let f;switch(r.cancelPuzzleSpecificModWrap()){case"gravity":{f=-Math.floor((g-(l.amount<0?0:1))/2);break}case"canonical-centered":{f=-Math.floor((g-1)/2);break}case"canonical-positive":{f=0;break}case"preserve-sign":{f=l.amount<0?1-g:0;break}default:throw new Error("Unknown mod wrap")}const S=mr(l.amount,g,f);return l.modified({amount:S})}if(r.cancelAny()){let l;const d=(m=r.puzzleSpecificSimplifyOptions())==null?void 0:m.axis;if(d)l=R=>d.areQuantumMovesSameAxis(t.quantum,R.quantum);else{const R=t.quantum.toString();l=I=>I.quantum.toString()===R}const g=r.cancelQuantum()==="same-direction",f=new Map;f.set(t.quantum.toString(),Math.sign(t.amount));let S;for(S=i.length-1;S>=0;S--){const R=i[S].as(a);if(!R||!l(R))break;const I=R.quantum.toString();if(g){const ee=f.get(I);if(ee&&!cr(ee,R))break;f.set(I,Math.sign(R.amount))}}const w=[...i.splice(S+1),t];if(d)o=d.simplifySameAxisMoves(w,r.cancelPuzzleSpecificModWrap()!=="none");else{const R=w.reduce((I,ee)=>I+ee.amount,0);if(f.size!==1)throw new Error("Internal error: multiple quantums when one was expected");o=[new a(t.quantum,R)]}}return o=o.map(l=>c(l)).filter(l=>l.amount!==0),u()}function pr(e,t,n){const r=t.as(a);return r?fr(e,r,n):new p([...e.childAlgNodes(),t])}var je,U,wt,Ae,gt,Jt,dr=(Jt=class extends St{constructor(){super(...arguments);v(this,U);v(this,je)}*traverseAlg(t,n){if(n.depth===0){yield*t.childAlgNodes();return}let r=[];const i=O(this,U,Ae).call(this,n);for(const o of t.childAlgNodes())for(const u of this.traverseAlgNode(o,i))r=Array.from(pr(new p(r),u,i).childAlgNodes());for(const o of r)yield o}*traverseGrouping(t,n){if(n.depth===0){yield t;return}if(t.amount===0)return;const r=new W(this.traverseAlg(t.alg,O(this,U,Ae).call(this,n)),t.amount);if(r.alg.experimentalIsEmpty())return;const i=O(this,U,wt).call(this).get(t);i&&(r.experimentalNISSPlaceholder=i,i.experimentalNISSGrouping=r),yield r}*traverseMove(t,n){yield t}*traverseCommutator(t,n){if(n.depth===0){yield t;return}const r=O(this,U,Ae).call(this,n),i=new K(this.traverseAlg(t.A,r),this.traverseAlg(t.B,r));i.A.experimentalIsEmpty()||i.B.experimentalIsEmpty()||i.A.isIdentical(i.B)||i.A.isIdentical(i.B.invert())||O(this,U,gt).call(this,i.A,i.B,n)||(yield i)}*traverseConjugate(t,n){if(n.depth===0){yield t;return}const r=O(this,U,Ae).call(this,n),i=new G(this.traverseAlg(t.A,r),this.traverseAlg(t.B,r));if(!i.B.experimentalIsEmpty()){if(i.A.experimentalIsEmpty()||i.A.isIdentical(i.B)||i.A.isIdentical(i.B.invert())||O(this,U,gt).call(this,i.A,i.B,n)){yield*t.B.childAlgNodes();return}yield i}}*traversePause(t,n){if(t.experimentalNISSGrouping){const r=new C;O(this,U,wt).call(this).set(t.experimentalNISSGrouping,r),yield r}else yield t}*traverseNewline(t,n){yield t}*traverseLineComment(t,n){yield t}},je=new WeakMap,U=new WeakSet,wt=function(){return s(this,je)??x(this,je,new Map)},Ae=function(t){return{...t,depth:t.depth?t.depth-1:null}},gt=function(t,n,r){var i,o,u,c;if(t.experimentalNumChildAlgNodes()===1&&n.experimentalNumChildAlgNodes()===1){const m=(i=Array.from(t.childAlgNodes())[0])==null?void 0:i.as(a),l=(o=Array.from(n.childAlgNodes())[0])==null?void 0:o.as(a);if(!(m&&l))return!1;if(l.quantum.isIdentical(m.quantum)||(c=(u=new cn(r).puzzleSpecificSimplifyOptions())==null?void 0:u.axis)!=null&&c.areQuantumMovesSameAxis(m.quantum,l.quantum))return!0}return!1},Jt),hr=ue(dr);function Pt(e){if(!e)return[];if(J(e,p))return e.childAlgNodes();if(typeof e=="string")return an(e).childAlgNodes();const t=e;if(typeof t[Symbol.iterator]=="function")return t;throw new Error("Invalid AlgNode")}function Ce(e){return J(e,p)?e:new p(e)}var k,V,p=(V=class extends se{constructor(n){super();v(this,k);x(this,k,Array.from(Pt(n)));for(const r of s(this,k))if(!ur(r))throw new Error("An alg can only contain alg nodes.")}isIdentical(n){const r=n;if(!n.is(V))return!1;const i=Array.from(s(this,k)),o=Array.from(s(r,k));if(i.length!==o.length)return!1;for(let u=0;u<i.length;u++)if(!i[u].isIdentical(o[u]))return!1;return!0}invert(){return new V(Jn(Array.from(s(this,k)).map(n=>n.invert())))}*experimentalExpand(n=1,r){r??(r=1/0);for(const i of jn(s(this,k),n))yield*i.experimentalExpand(n,r)}expand(n){return new V(this.experimentalExpand(1,(n==null?void 0:n.depth)??1/0))}*experimentalLeafMoves(){for(const n of this.experimentalExpand())n.is(a)&&(yield n)}concat(n){return new V(Array.from(s(this,k)).concat(Array.from(Pt(n))))}experimentalIsEmpty(){for(const n of s(this,k))return!1;return!0}static fromString(n){return an(n)}units(){return this.childAlgNodes()}*childAlgNodes(){for(const n of s(this,k))yield n}experimentalNumUnits(){return this.experimentalNumChildAlgNodes()}experimentalNumChildAlgNodes(){return Array.from(s(this,k)).length}get type(){return on("deprecated: type"),"sequence"}toString(n){var o,u;let r="",i=null;for(const c of s(this,k)){i&&(r+=wr(i,c));const m=(o=c.as(C))==null?void 0:o.experimentalNISSGrouping;if(m){if(m.amount!==-1)throw new Error("Invalid NISS Grouping amount!");r+=`^(${m.alg.toString(n)})`}else(u=c.as(W))!=null&&u.experimentalNISSPlaceholder||(r+=c.toString(n));i=c}return r}experimentalSimplify(n){return new V(hr(this,n??{}))}simplify(n){return this.experimentalSimplify(n)}},k=new WeakMap,V);function wr(e,t){var n;return e.is(he)||t.is(he)||(n=t.as(W))!=null&&n.experimentalNISSPlaceholder?"":e.is(_e)&&!t.is(he)?`
`:" "}new p([new a("R",1),new a("U",1),new a("R",-1),new a("U",1),new a("R",1),new a("U",-2),new a("R",-1)]),new p([new a("R",1),new a("U",2),new a("R",-1),new a("U",-1),new a("R",1),new a("U",-1),new a("R",-1)]),new p([new K(new p([new a("R",1),new a("U",1),new a("R",-2)]),new p([new G(new p([new a("R",1)]),new p([new a("U",1)]))]))]),new p([new a("R",1),new a("U",-1),new a("L",-1),new a("U",1),new a("R",-1),new a("U",-1),new a("L",1),new a("U",1)]),new p([new a("x",-1),new K(new p([new G(new p([new a("R",1)]),new p([new a("U",-1)]))]),new p([new a("D",1)])),new K(new p([new G(new p([new a("R",1)]),new p([new a("U",1)]))]),new p([new a("D",1)])),new a("x",1)]),new p([new G(new p([new a("F",1)]),new p([new K(new p([new a("U",1)]),new p([new a("R",1)]))]))]),new p([new G(new p([new a("R",2)]),new p([new K(new p([new a("F",2)]),new p([new a("R",-1),new a("B",-1),new a("R",1)]))]))]),new p([new a("F",1),new a("U",1),new a("R",1),new a("U",-1),new a("R",-1),new a("F",-1)]),new p([new a("R",1),new a("U",1),new a("R",-1),new a("U",-1),new a("R",-1),new a("F",1),new a("R",2),new a("U",-1),new a("R",-1),new a("U",-1),new a("R",1),new a("U",1),new a("R",-1),new a("F",-1)]),new p([new G(new p([new a("F",1)]),new p([new W(new p([new K(new p([new a("R",1)]),new p([new a("U",1)]))]),3)]))]),new p([new C,new C,new C]);function xt(e,t,n){const r={};for(const i of e.orbits){const o=t[i.orbitName],u=n[i.orbitName];if(Ve(i.numOrientations,u))r[i.orbitName]=o;else if(Ve(i.numOrientations,o))r[i.orbitName]=u;else{const c=new Array(i.numPieces);if(i.numOrientations===1){for(let m=0;m<i.numPieces;m++)c[m]=o.permutation[u.permutation[m]];r[i.orbitName]={permutation:c,orientationDelta:o.orientationDelta}}else{const m=new Array(i.numPieces);for(let l=0;l<i.numPieces;l++)m[l]=(o.orientationDelta[u.permutation[l]]+u.orientationDelta[l])%i.numOrientations,c[l]=o.permutation[u.permutation[l]];r[i.orbitName]={permutation:c,orientationDelta:m}}}}return r}function At(e,t,n){const r={};for(const i of e.orbits){const o=t[i.orbitName],u=n[i.orbitName];if(Ve(i.numOrientations,u))r[i.orbitName]=o;else{const c=new Array(i.numPieces);if(i.numOrientations===1){for(let l=0;l<i.numPieces;l++)c[l]=o.pieces[u.permutation[l]];const m={pieces:c,orientation:o.orientation};r[i.orbitName]=m}else{const m=new Array(i.numPieces),l=o.orientationMod?new Array(i.numPieces):void 0;for(let g=0;g<i.numPieces;g++){const f=u.permutation[g];let S=i.numOrientations;if(o.orientationMod){const w=o.orientationMod[f];l[g]=w,S=w||i.numOrientations}m[g]=(o.orientation[f]+u.orientationDelta[g])%S,c[g]=o.pieces[f]}const d={pieces:c,orientation:m};l&&(d.orientationMod=l),r[i.orbitName]=d}}}return r}var kt=new Map;function gr(e){const t=kt.get(e);if(t)return t;const n=new Array(e),r=new Array(e);for(let o=0;o<e;o++)n[o]=o,r[o]=0;const i={permutation:n,orientationDelta:r};return kt.set(e,i),i}function xr(e){const t={};for(const n of e.orbits)t[n.orbitName]=gr(n.numPieces);return t}function vr(e,t){function n(i,o){var l;const u=i.toString(),c=e.definition.moves[u];if(c)return Be(e,c,o);const m=(l=e.definition.derivedMoves)==null?void 0:l[u];if(m)return Be(e,e.algToTransformation(m).transformationData,o)}const r=n(t.quantum,t.amount)??n(t,1)??n(t.invert,-1);if(r)return r;throw new Error(`Invalid move for KPuzzle (${e.name()}): ${t}`)}var T=class $e{constructor(t,n){this.kpuzzle=t,this.patternData=n}toJSON(){return{experimentalPuzzleName:this.kpuzzle.name(),patternData:this.patternData}}static fromTransformation(t){const n=At(t.kpuzzle.definition,t.kpuzzle.definition.defaultPattern,t.transformationData);return new $e(t.kpuzzle,n)}apply(t){return this.applyTransformation(this.kpuzzle.toTransformation(t))}applyTransformation(t){if(t.isIdentityTransformation())return new $e(this.kpuzzle,this.patternData);const n=At(this.kpuzzle.definition,this.patternData,t.transformationData);return new $e(this.kpuzzle,n)}applyMove(t){return this.applyTransformation(this.kpuzzle.moveToTransformation(t))}applyAlg(t){return this.applyTransformation(this.kpuzzle.algToTransformation(t))}isIdentical(t){return Rr(this.kpuzzle,this.patternData,t.patternData)}experimentalToTransformation(){if(!this.kpuzzle.canConvertDefaultPatternToUniqueTransformation())return null;const t={};for(const[n,r]of Object.entries(this.patternData)){const i={permutation:r.pieces,orientationDelta:r.orientation};t[n]=i}return new Re(this.kpuzzle,t)}experimentalIsSolved(t){if(!this.kpuzzle.definition.experimentalIsPatternSolved)throw new Error("`KPattern.experimentalIsPatternSolved()` is not supported for this puzzle at the moment.");return this.kpuzzle.definition.experimentalIsPatternSolved(this,t)}},de,q,Re=(q=class{constructor(t,n){v(this,de);this.kpuzzle=t,this.transformationData=n}toJSON(){return{experimentalPuzzleName:this.kpuzzle.name(),transformationData:this.transformationData}}invert(){return new q(this.kpuzzle,mn(this.kpuzzle,this.transformationData))}isIdentityTransformation(){return s(this,de)??x(this,de,this.isIdentical(this.kpuzzle.identityTransformation()))}static experimentalConstructIdentity(t){const n=new q(t,xr(t.definition));return x(n,de,!0),n}isIdentical(t){return Dr(this.kpuzzle,this.transformationData,t.transformationData)}apply(t){return this.applyTransformation(this.kpuzzle.toTransformation(t))}applyTransformation(t){if(this.kpuzzle!==t.kpuzzle)throw new Error(`Tried to apply a transformation for a KPuzzle (${t.kpuzzle.name()}) to a different KPuzzle (${this.kpuzzle.name()}).`);return s(this,de)?new q(this.kpuzzle,t.transformationData):s(t,de)?new q(this.kpuzzle,this.transformationData):new q(this.kpuzzle,xt(this.kpuzzle.definition,this.transformationData,t.transformationData))}applyMove(t){return this.applyTransformation(this.kpuzzle.moveToTransformation(t))}applyAlg(t){return this.applyTransformation(this.kpuzzle.algToTransformation(t))}toKPattern(){return T.fromTransformation(this)}repetitionOrder(){return br(this.kpuzzle.definition,this)}selfMultiply(t){return new q(this.kpuzzle,Be(this.kpuzzle,this.transformationData,t))}},de=new WeakMap,q);function Ve(e,t){t.permutation||console.log(t);const{permutation:n}=t,r=n.length;for(let i=0;i<r;i++)if(n[i]!==i)return!1;if(e>1){const{orientationDelta:i}=t;for(let o=0;o<r;o++)if(i[o]!==0)return!1}return!0}function yr(e,t,n,r={}){for(let i=0;i<e.numPieces;i++)if(!(r!=null&&r.ignorePieceOrientations)&&t.orientationDelta[i]!==n.orientationDelta[i]||!(r!=null&&r.ignorePiecePermutation)&&t.permutation[i]!==n.permutation[i])return!1;return!0}function Dr(e,t,n){for(const r of e.definition.orbits)if(!yr(r,t[r.orbitName],n[r.orbitName]))return!1;return!0}function Sr(e,t,n,r={}){var i,o;for(let u=0;u<e.numPieces;u++)if(!(r!=null&&r.ignorePieceOrientations)&&(t.orientation[u]!==n.orientation[u]||(((i=t.orientationMod)==null?void 0:i[u])??0)!==(((o=n.orientationMod)==null?void 0:o[u])??0))||!(r!=null&&r.ignorePieceIndices)&&t.pieces[u]!==n.pieces[u])return!1;return!0}function Rr(e,t,n){for(const r of e.definition.orbits)if(!Sr(r,t[r.orbitName],n[r.orbitName]))return!1;return!0}function mn(e,t){const n={};for(const r of e.definition.orbits){const i=t[r.orbitName];if(Ve(r.numOrientations,i))n[r.orbitName]=i;else if(r.numOrientations===1){const o=new Array(r.numPieces);for(let u=0;u<r.numPieces;u++)o[i.permutation[u]]=u;n[r.orbitName]={permutation:o,orientationDelta:i.orientationDelta}}else{const o=new Array(r.numPieces),u=new Array(r.numPieces);for(let c=0;c<r.numPieces;c++){const m=i.permutation[c];o[m]=c,u[m]=(r.numOrientations-i.orientationDelta[c]+r.numOrientations)%r.numOrientations}n[r.orbitName]={permutation:o,orientationDelta:u}}}return n}function Be(e,t,n){if(n===1)return t;if(n<0)return Be(e,mn(e,t),-n);if(n===0){const{transformationData:o}=e.identityTransformation();return o}let r=t;n!==2&&(r=Be(e,t,Math.floor(n/2)));const i=xt(e.definition,r,r);return n%2===0?i:xt(e.definition,t,i)}var Lr=class extends St{traverseAlg(e,t){let n=null;for(const r of e.childAlgNodes())n?n=n.applyTransformation(this.traverseAlgNode(r,t)):n=this.traverseAlgNode(r,t);return n??t.identityTransformation()}traverseGrouping(e,t){const n=this.traverseAlg(e.alg,t);return new Re(t,Be(t,n.transformationData,e.amount))}traverseMove(e,t){return t.moveToTransformation(e)}traverseCommutator(e,t){const n=this.traverseAlg(e.A,t),r=this.traverseAlg(e.B,t);return n.applyTransformation(r).applyTransformation(n.invert()).applyTransformation(r.invert())}traverseConjugate(e,t){const n=this.traverseAlg(e.A,t),r=this.traverseAlg(e.B,t);return n.applyTransformation(r).applyTransformation(n.invert())}traversePause(e,t){return t.identityTransformation()}traverseNewline(e,t){return t.identityTransformation()}traverseLineComment(e,t){return t.identityTransformation()}},Fr=ue(Lr);function vt(e,t){return t?vt(t,e%t):e}function br(e,t){let n=1;for(const r of e.orbits){const i=t.transformationData[r.orbitName],o=new Array(r.numPieces);for(let u=0;u<r.numPieces;u++)if(!o[u]){let c=u,m=0,l=0;for(;o[c]=!0,m=m+i.orientationDelta[c],l=l+1,c=i.permutation[c],c!==u;);m!==0&&(l=l*r.numOrientations/vt(r.numOrientations,Math.abs(m))),n=n*l/vt(n,l)}}return n}var Ke,Ne,Je,Yt,H=(Yt=class{constructor(e,t){y(this,"experimentalPGNotation");v(this,Ke);v(this,Ne,new Map);v(this,Je);this.definition=e,this.experimentalPGNotation=t==null?void 0:t.experimentalPGNotation}lookupOrbitDefinition(e){return s(this,Ke)||x(this,Ke,(()=>{const t={};for(const n of this.definition.orbits)t[n.orbitName]=n;return t})()),s(this,Ke)[e]}name(){return this.definition.name}identityTransformation(){return Re.experimentalConstructIdentity(this)}moveToTransformation(e){typeof e=="string"&&(e=new a(e));const t=e.toString(),n=s(this,Ne).get(t);if(n)return new Re(this,n);if(this.experimentalPGNotation){const i=this.experimentalPGNotation.lookupMove(e);if(!i)throw new Error(`could not map to internal move: ${e}`);return s(this,Ne).set(t,i),new Re(this,i)}const r=vr(this,e);return s(this,Ne).set(t,r),new Re(this,r)}algToTransformation(e){return typeof e=="string"&&(e=new p(e)),Fr(e,this)}toTransformation(e){var t,n;return typeof e=="string"?this.algToTransformation(e):(t=e==null?void 0:e.is)!=null&&t.call(e,p)?this.algToTransformation(e):(n=e==null?void 0:e.is)!=null&&n.call(e,a)?this.moveToTransformation(e):e}defaultPattern(){return new T(this,this.definition.defaultPattern)}canConvertDefaultPatternToUniqueTransformation(){return s(this,Je)??x(this,Je,(()=>{for(const e of this.definition.orbits){const t=new Array(e.numPieces).fill(!1);for(const n of this.definition.defaultPattern[e.orbitName].pieces)t[n]=!0;for(const n of t)if(!n)return!1}return!0})())}},Ke=new WeakMap,Ne=new WeakMap,Je=new WeakMap,Yt),fn=class Qe extends Promise{constructor(t){super(n=>{n()}),this._executor=t}static from(t){return new Qe(n=>{n(t())})}static resolve(t){return new Qe(n=>{n(t)})}static reject(t){return new Qe((n,r)=>{r(t)})}then(t,n){return this._promise=this._promise||new Promise(this._executor),this._promise.then(t,n)}catch(t){return this._promise=this._promise||new Promise(this._executor),this._promise.catch(t)}};function Z(e){return new fn(t=>{t(e())})}var ce=class{constructor(e,t){y(this,"stickerings",new Map);for(const n of e.definition.orbits)this.stickerings.set(n.orbitName,new Array(n.numPieces).fill(t))}},$="regular",L="ignored",Se="oriented",Er="experimentalOriented2",ze="invisible",le="dim",Pe="mystery",Nr={Regular:{facelets:[$,$,$,$,$]},Ignored:{facelets:[L,L,L,L,L]},OrientationStickers:{facelets:[Se,Se,Se,Se,Se]},IgnoreNonPrimary:{facelets:[$,L,L,L,L]},Invisible:{facelets:[ze,ze,ze,ze,ze]},PermuteNonPrimary:{facelets:[le,$,$,$,$]},Dim:{facelets:[le,le,le,le,le]},Ignoriented:{facelets:[le,L,L,L,L]},OrientationWithoutPermutation:{facelets:[Se,L,L,L,L]},ExperimentalOrientationWithoutPermutation2:{facelets:[Er,L,L,L,L]},Mystery:{facelets:[Pe,Pe,Pe,Pe,Pe]}};function Br(e){return Nr[e]}var pn=class extends ce{constructor(e){super(e,"Regular")}set(e,t){for(const[n,r]of this.stickerings.entries())for(let i=0;i<r.length;i++)e.stickerings.get(n)[i]&&(r[i]=t);return this}toStickeringMask(){const e={orbits:{}};for(const[t,n]of this.stickerings.entries()){const r=[],i={pieces:r};e.orbits[t]=i;for(const o of n)r.push(Br(o))}return e}},dn=class{constructor(e){this.kpuzzle=e}and(e){const t=new ce(this.kpuzzle,!1);for(const n of this.kpuzzle.definition.orbits)e:for(let r=0;r<n.numPieces;r++){t.stickerings.get(n.orbitName)[r]=!0;for(const i of e)if(!i.stickerings.get(n.orbitName)[r]){t.stickerings.get(n.orbitName)[r]=!1;continue e}}return t}or(e){const t=new ce(this.kpuzzle,!1);for(const n of this.kpuzzle.definition.orbits)e:for(let r=0;r<n.numPieces;r++){t.stickerings.get(n.orbitName)[r]=!1;for(const i of e)if(i.stickerings.get(n.orbitName)[r]){t.stickerings.get(n.orbitName)[r]=!0;continue e}}return t}not(e){const t=new ce(this.kpuzzle,!1);for(const n of this.kpuzzle.definition.orbits)for(let r=0;r<n.numPieces;r++)t.stickerings.get(n.orbitName)[r]=!e.stickerings.get(n.orbitName)[r];return t}all(){return this.and(this.moves([]))}move(e){const t=this.kpuzzle.moveToTransformation(e),n=new ce(this.kpuzzle,!1);for(const r of this.kpuzzle.definition.orbits)for(let i=0;i<r.numPieces;i++)(t.transformationData[r.orbitName].permutation[i]!==i||t.transformationData[r.orbitName].orientationDelta[i]!==0)&&(n.stickerings.get(r.orbitName)[i]=!0);return n}moves(e){return e.map(t=>this.move(t))}orbits(e){const t=new ce(this.kpuzzle,!1);for(const n of e)t.stickerings.get(n).fill(!0);return t}orbitPrefix(e){const t=new ce(this.kpuzzle,!1);for(const n of this.kpuzzle.definition.orbits)n.orbitName.startsWith(e)&&t.stickerings.get(n.orbitName).fill(!0);return t}},Tt="Last Layer",Ut="Last Slot",_={"3x3x3":Tt,megaminx:Tt},te={"3x3x3":Ut,megaminx:Ut},zr={full:{groups:{"3x3x3":"Stickering",megaminx:"Stickering"}},OLL:{groups:_},PLL:{groups:_},LL:{groups:_},EOLL:{groups:_},COLL:{groups:_},OCLL:{groups:_},CPLL:{groups:_},CLL:{groups:_},EPLL:{groups:_},ELL:{groups:_},ZBLL:{groups:_},LS:{groups:te},LSOLL:{groups:te},LSOCLL:{groups:te},ELS:{groups:te},CLS:{groups:te},ZBLS:{groups:te},VLS:{groups:te},WVLS:{groups:te},F2L:{groups:{"3x3x3":"CFOP (Fridrich)"}},Daisy:{groups:{"3x3x3":"CFOP (Fridrich)"}},Cross:{groups:{"3x3x3":"CFOP (Fridrich)"}},EO:{groups:{"3x3x3":"ZZ"}},EOline:{groups:{"3x3x3":"ZZ"}},EOcross:{groups:{"3x3x3":"ZZ"}},FirstBlock:{groups:{"3x3x3":"Roux"}},SecondBlock:{groups:{"3x3x3":"Roux"}},CMLL:{groups:{"3x3x3":"Roux"}},L10P:{groups:{"3x3x3":"Roux"}},L6E:{groups:{"3x3x3":"Roux"}},L6EO:{groups:{"3x3x3":"Roux"}},"2x2x2":{groups:{"3x3x3":"Petrus"}},"2x2x3":{groups:{"3x3x3":"Petrus"}},EODF:{groups:{"3x3x3":"Nautilus"}},G1:{groups:{"3x3x3":"FMC"}},L2C:{groups:{"4x4x4":"Reduction","5x5x5":"Reduction","6x6x6":"Reduction"}},PBL:{groups:{"2x2x2":"Ortega"}},"Void Cube":{groups:{"3x3x3":"Miscellaneous"}},invisible:{groups:{"3x3x3":"Miscellaneous"}},picture:{groups:{"3x3x3":"Miscellaneous"}},"centers-only":{groups:{"3x3x3":"Miscellaneous"}},"opposite-centers":{groups:{"4x4x4":"Reduction"}},"experimental-centers-U":{},"experimental-centers-U-D":{},"experimental-centers-U-L-D":{},"experimental-centers-U-L-B-D":{},"experimental-centers":{},"experimental-fto-fc":{groups:{fto:"Bencisco"}},"experimental-fto-f2t":{groups:{fto:"Bencisco"}},"experimental-fto-sc":{groups:{fto:"Bencisco"}},"experimental-fto-l2c":{groups:{fto:"Bencisco"}},"experimental-fto-lbt":{groups:{fto:"Bencisco"}},"experimental-fto-l3t":{groups:{fto:"Bencisco"}}};async function Ie(e,t){return(await Pr(e,t)).toStickeringMask()}async function Pr(e,t){const n=await e.kpuzzle(),r=new pn(n),i=new dn(n),o=()=>i.move("U"),u=()=>i.or(i.moves(["U","D"])),c=()=>i.or(i.moves(["L","R"])),m=()=>i.not(c()),l=()=>i.not(o()),d=()=>i.orbitPrefix("CENTER"),g=it=>i.and([i.move(it),d()]),f=()=>i.orbitPrefix("EDGE"),S=it=>i.and([i.and(i.moves(it)),f()]),w=()=>i.or([i.orbitPrefix("CORNER"),i.orbitPrefix("C4RNER"),i.orbitPrefix("C5RNER")]),R=()=>i.or([m(),i.and([o(),f()])]),I=()=>i.and([o(),d()]),ee=()=>i.and([i.and(i.moves(["F","R"])),f()]),qe=()=>i.and([i.and(i.moves(["F","R"])),w(),i.not(o())]),ye=()=>i.or([qe(),ee()]);function F(){r.set(l(),"Dim")}function $n(){r.set(o(),"PermuteNonPrimary"),r.set(I(),"Dim")}function De(){r.set(o(),"IgnoreNonPrimary"),r.set(I(),"Regular")}function Et(){r.set(o(),"Ignoriented"),r.set(I(),"Dim")}switch(t){case"full":break;case"PLL":{F(),$n();break}case"CLS":{F(),r.set(qe(),"Regular"),r.set(o(),"Ignoriented"),r.set(i.and([o(),d()]),"Dim"),r.set(i.and([o(),w()]),"IgnoreNonPrimary");break}case"OLL":{F(),De();break}case"EOLL":{F(),De(),r.set(i.and([o(),w()]),"Ignored");break}case"COLL":{F(),r.set(i.and([o(),f()]),"Ignoriented"),r.set(i.and([o(),d()]),"Dim"),r.set(i.and([o(),w()]),"Regular");break}case"OCLL":{F(),Et(),r.set(i.and([o(),w()]),"IgnoreNonPrimary");break}case"CPLL":{F(),r.set(i.and([w(),o()]),"PermuteNonPrimary"),r.set(i.and([i.not(w()),o()]),"Dim");break}case"CLL":{F(),r.set(i.not(i.and([w(),o()])),"Dim");break}case"EPLL":{F(),r.set(o(),"Dim"),r.set(i.and([o(),f()]),"PermuteNonPrimary");break}case"ELL":{F(),r.set(o(),"Dim"),r.set(i.and([o(),f()]),"Regular");break}case"ELS":{F(),De(),r.set(i.and([o(),w()]),"Ignored"),r.set(ee(),"Regular"),r.set(qe(),"Ignored");break}case"LL":{F();break}case"F2L":{r.set(o(),"Ignored");break}case"ZBLL":{F(),r.set(o(),"PermuteNonPrimary"),r.set(I(),"Dim"),r.set(i.and([o(),w()]),"Regular");break}case"ZBLS":{F(),r.set(ye(),"Regular"),De(),r.set(i.and([o(),w()]),"Ignored");break}case"VLS":{F(),r.set(ye(),"Regular"),De();break}case"WVLS":{F(),r.set(ye(),"Regular"),r.set(i.and([o(),f()]),"Ignoriented"),r.set(i.and([o(),d()]),"Dim"),r.set(i.and([o(),w()]),"IgnoreNonPrimary");break}case"LS":{F(),r.set(ye(),"Regular"),r.set(o(),"Ignored"),r.set(I(),"Dim");break}case"LSOLL":{F(),De(),r.set(ye(),"Regular");break}case"LSOCLL":{F(),Et(),r.set(i.and([o(),w()]),"IgnoreNonPrimary"),r.set(ye(),"Regular");break}case"EO":{r.set(w(),"Ignored"),r.set(f(),"OrientationWithoutPermutation");break}case"EOline":{r.set(w(),"Ignored"),r.set(f(),"OrientationWithoutPermutation"),r.set(i.and(i.moves(["D","M"])),"Regular");break}case"EOcross":{r.set(f(),"OrientationWithoutPermutation"),r.set(i.move("D"),"Regular"),r.set(w(),"Ignored");break}case"CMLL":{r.set(l(),"Dim"),r.set(R(),"Ignored"),r.set(i.and([o(),w()]),"Regular");break}case"L10P":{r.set(i.not(R()),"Dim"),r.set(i.and([w(),o()]),"Regular");break}case"L6E":{r.set(i.not(R()),"Dim");break}case"L6EO":{r.set(i.not(R()),"Dim"),r.set(R(),"ExperimentalOrientationWithoutPermutation2"),r.set(i.and([d(),u()]),"ExperimentalOrientationWithoutPermutation2"),r.set(i.and([i.move("M"),i.move("E")]),"Ignored");break}case"Daisy":{r.set(i.all(),"Ignored"),r.set(d(),"Dim"),r.set(i.and([i.move("D"),d()]),"Regular"),r.set(i.and([i.move("U"),f()]),"IgnoreNonPrimary");break}case"Cross":{r.set(i.all(),"Ignored"),r.set(d(),"Dim"),r.set(i.and([i.move("D"),d()]),"Regular"),r.set(i.and([i.move("D"),f()]),"Regular");break}case"2x2x2":{r.set(i.or(i.moves(["U","F","R"])),"Ignored"),r.set(i.and([i.or(i.moves(["U","F","R"])),d()]),"Dim");break}case"2x2x3":{r.set(i.all(),"Dim"),r.set(i.or(i.moves(["U","F","R"])),"Ignored"),r.set(i.and([i.or(i.moves(["U","F","R"])),d()]),"Dim"),r.set(i.and([i.move("F"),i.not(i.or(i.moves(["U","R"])))]),"Regular");break}case"G1":{r.set(i.all(),"ExperimentalOrientationWithoutPermutation2"),r.set(i.or(i.moves(["E"])),"OrientationWithoutPermutation"),r.set(i.and(i.moves(["E","S"])),"Ignored");break}case"L2C":{r.set(i.or(i.moves(["L","R","B","D"])),"Dim"),r.set(i.not(d()),"Ignored");break}case"PBL":{r.set(i.all(),"Ignored"),r.set(i.or(i.moves(["U","D"])),"PermuteNonPrimary");break}case"FirstBlock":{r.set(i.not(i.and([i.and(i.moves(["L"])),i.not(o())])),"Ignored"),r.set(g("R"),"Dim");break}case"SecondBlock":{r.set(i.not(i.and([i.and(i.moves(["L"])),i.not(o())])),"Ignored"),r.set(i.and([i.and(i.moves(["L"])),i.not(o())]),"Dim"),r.set(i.and([i.and(i.moves(["R"])),i.not(o())]),"Regular");break}case"EODF":{F(),r.set(i.or([qe(),i.and([o(),w()])]),"Ignored"),r.set(i.or([i.and([o(),f()]),ee()]),"OrientationWithoutPermutation"),r.set(S(["D","F"]),"Regular"),r.set(g("F"),"Regular");break}case"Void Cube":{r.set(d(),"Invisible");break}case"picture":case"invisible":{r.set(i.all(),"Invisible");break}case"centers-only":{r.set(i.not(d()),"Ignored");break}case"opposite-centers":{r.set(i.not(i.and([d(),i.or(i.moves(["U","D"]))])),"Ignored");break}default:console.warn(`Unsupported stickering for ${e.id}: ${t}. Setting all pieces to dim.`),r.set(i.and(i.moves([])),"Dim")}return r}async function tt(e,t){const n=[],r=[];for(const[i,o]of Object.entries(zr))o.groups&&(e in o.groups?n.push(i):t!=null&&t.use3x3x3Fallbacks&&"3x3x3"in o.groups&&r.push(i));return n.concat(r)}function D(e){let t=null;return()=>t??(t=e())}async function Lt(e){return(await import("./index.CMO1K-EF.js")).getPuzzleGeometryByName(e,{allMoves:!0,orientCenters:!0,addRotations:!0})}async function hn(e,t,n){const r=await e,i=r.getKPuzzleDefinition(!0);i.name=t;const o=await import("./index.CMO1K-EF.js"),u=new o.ExperimentalPGNotation(r,r.getOrbitsDef(!0));if(n){const c=new Set(n);for(const[m,l]of Object.entries(i.defaultPattern))c.has(m)&&(l.orientationMod=new Array(l.pieces.length).fill(1))}return new H(u.remapKPuzzleDefinition(i),{experimentalPGNotation:u})}var Ge,Ye,Xe,et,Xt,ie=(Xt=class{constructor(e){y(this,"pgId");y(this,"id");y(this,"fullName");y(this,"inventedBy");y(this,"inventionYear");v(this,Ge);v(this,Ye);v(this,Xe);v(this,et);y(this,"puzzleSpecificSimplifyOptionsPromise",Ar(this.kpuzzle.bind(this)));this.pgId=e.pgID,this.id=e.id,this.fullName=e.fullName,this.inventedBy=e.inventedBy,this.inventionYear=e.inventionYear,x(this,Ge,e.setOrientationModTo1ForPiecesOfOrbits)}pg(){return s(this,Ye)??x(this,Ye,Lt(this.pgId??this.id))}kpuzzle(){return s(this,Xe)??x(this,Xe,hn(this.pg(),this.id,s(this,Ge)))}svg(){return s(this,et)??x(this,et,(async()=>(await this.pg()).generatesvg())())}},Ge=new WeakMap,Ye=new WeakMap,Xe=new WeakMap,et=new WeakMap,Xt),ke=class extends ie{constructor(){super(...arguments);y(this,"stickerings",()=>tt(this.id,{use3x3x3Fallbacks:!0}))}stickeringMask(t){return Ie(this,t)}};function Ar(e){return new fn(async t=>{const n=await e();t({quantumMoveOrder:r=>n.moveToTransformation(new a(r)).repetitionOrder()})})}var wn={name:"3x3x3",orbits:[{orbitName:"EDGES",numPieces:12,numOrientations:2},{orbitName:"CORNERS",numPieces:8,numOrientations:3},{orbitName:"CENTERS",numPieces:6,numOrientations:4}],defaultPattern:{EDGES:{pieces:[0,1,2,3,4,5,6,7,8,9,10,11],orientation:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{pieces:[0,1,2,3,4,5,6,7],orientation:[0,0,0,0,0,0,0,0]},CENTERS:{pieces:[0,1,2,3,4,5],orientation:[0,0,0,0,0,0],orientationMod:[1,1,1,1,1,1]}},moves:{U:{EDGES:{permutation:[1,2,3,0,4,5,6,7,8,9,10,11],orientationDelta:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{permutation:[1,2,3,0,4,5,6,7],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,1,2,3,4,5],orientationDelta:[1,0,0,0,0,0]}},y:{EDGES:{permutation:[1,2,3,0,5,6,7,4,10,8,11,9],orientationDelta:[0,0,0,0,0,0,0,0,1,1,1,1]},CORNERS:{permutation:[1,2,3,0,7,4,5,6],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,2,3,4,1,5],orientationDelta:[1,0,0,0,0,3]}},x:{EDGES:{permutation:[4,8,0,9,6,10,2,11,5,7,1,3],orientationDelta:[1,0,1,0,1,0,1,0,0,0,0,0]},CORNERS:{permutation:[4,0,3,5,7,6,2,1],orientationDelta:[2,1,2,1,1,2,1,2]},CENTERS:{permutation:[2,1,5,3,0,4],orientationDelta:[0,3,0,1,2,2]}},L:{EDGES:{permutation:[0,1,2,11,4,5,6,9,8,3,10,7],orientationDelta:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{permutation:[0,1,6,2,4,3,5,7],orientationDelta:[0,0,2,1,0,2,1,0]},CENTERS:{permutation:[0,1,2,3,4,5],orientationDelta:[0,1,0,0,0,0]}},F:{EDGES:{permutation:[9,1,2,3,8,5,6,7,0,4,10,11],orientationDelta:[1,0,0,0,1,0,0,0,1,1,0,0]},CORNERS:{permutation:[3,1,2,5,0,4,6,7],orientationDelta:[1,0,0,2,2,1,0,0]},CENTERS:{permutation:[0,1,2,3,4,5],orientationDelta:[0,0,1,0,0,0]}},R:{EDGES:{permutation:[0,8,2,3,4,10,6,7,5,9,1,11],orientationDelta:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{permutation:[4,0,2,3,7,5,6,1],orientationDelta:[2,1,0,0,1,0,0,2]},CENTERS:{permutation:[0,1,2,3,4,5],orientationDelta:[0,0,0,1,0,0]}},B:{EDGES:{permutation:[0,1,10,3,4,5,11,7,8,9,6,2],orientationDelta:[0,0,1,0,0,0,1,0,0,0,1,1]},CORNERS:{permutation:[0,7,1,3,4,5,2,6],orientationDelta:[0,2,1,0,0,0,2,1]},CENTERS:{permutation:[0,1,2,3,4,5],orientationDelta:[0,0,0,0,1,0]}},D:{EDGES:{permutation:[0,1,2,3,7,4,5,6,8,9,10,11],orientationDelta:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{permutation:[0,1,2,3,5,6,7,4],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,1,2,3,4,5],orientationDelta:[0,0,0,0,0,1]}},z:{EDGES:{permutation:[9,3,11,7,8,1,10,5,0,4,2,6],orientationDelta:[1,1,1,1,1,1,1,1,1,1,1,1]},CORNERS:{permutation:[3,2,6,5,0,4,7,1],orientationDelta:[1,2,1,2,2,1,2,1]},CENTERS:{permutation:[1,5,2,0,4,3],orientationDelta:[1,1,1,1,3,1]}},M:{EDGES:{permutation:[2,1,6,3,0,5,4,7,8,9,10,11],orientationDelta:[1,0,1,0,1,0,1,0,0,0,0,0]},CORNERS:{permutation:[0,1,2,3,4,5,6,7],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[4,1,0,3,5,2],orientationDelta:[2,0,0,0,2,0]}},E:{EDGES:{permutation:[0,1,2,3,4,5,6,7,9,11,8,10],orientationDelta:[0,0,0,0,0,0,0,0,1,1,1,1]},CORNERS:{permutation:[0,1,2,3,4,5,6,7],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,4,1,2,3,5],orientationDelta:[0,0,0,0,0,0]}},S:{EDGES:{permutation:[0,3,2,7,4,1,6,5,8,9,10,11],orientationDelta:[0,1,0,1,0,1,0,1,0,0,0,0]},CORNERS:{permutation:[0,1,2,3,4,5,6,7],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[1,5,2,0,4,3],orientationDelta:[1,1,0,1,0,1]}},u:{EDGES:{permutation:[1,2,3,0,4,5,6,7,10,8,11,9],orientationDelta:[0,0,0,0,0,0,0,0,1,1,1,1]},CORNERS:{permutation:[1,2,3,0,4,5,6,7],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,2,3,4,1,5],orientationDelta:[1,0,0,0,0,0]}},l:{EDGES:{permutation:[2,1,6,11,0,5,4,9,8,3,10,7],orientationDelta:[1,0,1,0,1,0,1,0,0,0,0,0]},CORNERS:{permutation:[0,1,6,2,4,3,5,7],orientationDelta:[0,0,2,1,0,2,1,0]},CENTERS:{permutation:[4,1,0,3,5,2],orientationDelta:[2,1,0,0,2,0]}},f:{EDGES:{permutation:[9,3,2,7,8,1,6,5,0,4,10,11],orientationDelta:[1,1,0,1,1,1,0,1,1,1,0,0]},CORNERS:{permutation:[3,1,2,5,0,4,6,7],orientationDelta:[1,0,0,2,2,1,0,0]},CENTERS:{permutation:[1,5,2,0,4,3],orientationDelta:[1,1,1,1,0,1]}},r:{EDGES:{permutation:[4,8,0,3,6,10,2,7,5,9,1,11],orientationDelta:[1,0,1,0,1,0,1,0,0,0,0,0]},CORNERS:{permutation:[4,0,2,3,7,5,6,1],orientationDelta:[2,1,0,0,1,0,0,2]},CENTERS:{permutation:[2,1,5,3,0,4],orientationDelta:[0,0,0,1,2,2]}},b:{EDGES:{permutation:[0,5,10,1,4,7,11,3,8,9,6,2],orientationDelta:[0,1,1,1,0,1,1,1,0,0,1,1]},CORNERS:{permutation:[0,7,1,3,4,5,2,6],orientationDelta:[0,2,1,0,0,0,2,1]},CENTERS:{permutation:[3,0,2,5,4,1],orientationDelta:[3,3,0,3,1,3]}},d:{EDGES:{permutation:[0,1,2,3,7,4,5,6,9,11,8,10],orientationDelta:[0,0,0,0,0,0,0,0,1,1,1,1]},CORNERS:{permutation:[0,1,2,3,5,6,7,4],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,4,1,2,3,5],orientationDelta:[0,0,0,0,0,1]}}},derivedMoves:{Uw:"u",Lw:"l",Fw:"f",Rw:"r",Bw:"b",Dw:"d",Uv:"y",Lv:"x'",Fv:"z",Rv:"x",Bv:"z'",Dv:"y'","2U":"u U'","2L":"l L'","2F":"f F'","2R":"r R'","2B":"b B'","2D":"d D'"}};function gn(e){const n=e.experimentalToTransformation().invert().transformationData.CORNERS;return n.permutation[6]*3+n.orientationDelta[6]}var Ct=new Array(24);function kr(e){{const t=["","z","x","z'","x'","x2"].map(r=>p.fromString(r)),n=new p("y");for(const r of t){let i=e.algToTransformation(r);for(let o=0;o<4;o++){i=i.applyAlg(n);const u=gn(i.toKPattern());Ct[u]={transformation:i.invert(),alg:r.concat(n)}}}}return Ct}function Tr(e){const t=gn(e),{transformation:n,alg:r}=kr(e.kpuzzle)[t];return{normalizedPattern:e.applyTransformation(n),normalizationAlg:r.invert()}}function Ur(e,t){return t.ignorePuzzleOrientation&&(e=Tr(e).normalizedPattern),!!e.experimentalToTransformation().isIdentityTransformation()}async function xn(e,t){return(await import("./index.CMO1K-EF.js")).getPuzzleGeometryByDesc(e,{allMoves:!0,orientCenters:!0,addRotations:!0,...t})}async function Cr(e,t){const n=xn(e,t);return hn(n,`description: ${e}`)}var vn=new H(wn);wn.experimentalIsPatternSolved=Mr;function yn(e){const t=e.patternData.CENTERS.pieces[0],n=e.patternData.CENTERS.pieces[5],r=e.patternData.CENTERS.pieces[1];let i=r;return t<r&&i--,n<r&&i--,[t,i]}var It=new Array(6).fill(0).map(()=>new Array(6));function Ir(){{const e=["","z","x","z'","x'","x2"].map(n=>p.fromString(n)),t=new p("y");for(const n of e){let r=vn.algToTransformation(n);for(let i=0;i<4;i++){r=r.applyAlg(t);const[o,u]=yn(r.toKPattern());It[o][u]=r.invert()}}}return It}function Or(e){const[t,n]=yn(e),r=Ir()[t][n];return e.applyTransformation(r)}function Mr(e,t){var n;return t.ignorePuzzleOrientation&&(e=Or(e)),t.ignoreCenterOrientation&&(e=new T(e.kpuzzle,{EDGES:e.patternData.EDGES,CORNERS:e.patternData.CORNERS,CENTERS:{pieces:e.patternData.CENTERS.pieces,orientation:new Array(6).fill(0)}})),!!((n=e.experimentalToTransformation())!=null&&n.isIdentityTransformation())}var nt=class extends Rt{constructor(e){super(),this.metric=e}traverseAlg(e){let t=0;for(const n of e.childAlgNodes())t+=this.traverseAlgNode(n);return t}traverseGrouping(e){const t=e.alg;return this.traverseAlg(t)*Math.abs(e.amount)}traverseMove(e){return this.metric(e)}traverseCommutator(e){return 2*(this.traverseAlg(e.A)+this.traverseAlg(e.B))}traverseConjugate(e){return 2*this.traverseAlg(e.A)+this.traverseAlg(e.B)}traversePause(e){return 0}traverseNewline(e){return 0}traverseLineComment(e){return 0}},Kr=class extends Rt{traverseAlg(e){let t=0;for(const n of e.childAlgNodes())t+=this.traverseAlgNode(n);return t}traverseGrouping(e){const t=e.alg;return this.traverseAlg(t)*Math.abs(e.amount)}traverseMove(e){return 1}traverseCommutator(e){return 2*(this.traverseAlg(e.A)+this.traverseAlg(e.B))}traverseConjugate(e){return 2*this.traverseAlg(e.A)+this.traverseAlg(e.B)}traversePause(e){return 1}traverseNewline(e){return 1}traverseLineComment(e){return 1}};function Dn(e){return"A"<=e&&e<="Z"}function Sn(e){const t=e.family;return Dn(t[0])&&t[t.length-1]==="v"||t==="x"||t==="y"||t==="z"||t==="T"?0:1}function Gr(e){return 1}function Rn(e){const t=e.family;return Dn(t[0])&&t[t.length-1]==="v"||t==="x"||t==="y"||t==="z"||t==="T"?0:1}function _r(e){return Math.abs(e.amount)*Rn(e)}var qr=ue(nt,[Sn]);ue(nt,[Gr]);ue(nt,[_r]);ue(nt,[Rn]);ue(Kr,[Sn]);var Wr=class extends Rt{traverseAlg(e){let t=0;for(const n of e.childAlgNodes())t+=this.traverseAlgNode(n);return t}traverseGrouping(e){return this.traverseAlg(e.alg)*Math.abs(e.amount)}traverseMove(e){return 1}traverseCommutator(e){return 2*(this.traverseAlg(e.A)+this.traverseAlg(e.B))}traverseConjugate(e){return 2*this.traverseAlg(e.A)+this.traverseAlg(e.B)}traversePause(e){return 1}traverseNewline(e){return 0}traverseLineComment(e){return 0}};ue(Wr);var Ft={id:"2x2x2",fullName:"2×2×2 Cube",kpuzzle:D(async()=>{const e=new H((await import("./puzzles-dynamic-side-events-AHFPWEBD.YHRyPmjr.js")).cube2x2x2JSON);return e.definition.experimentalIsPatternSolved=Ur,e}),svg:async()=>(await import("./puzzles-dynamic-side-events-AHFPWEBD.YHRyPmjr.js")).cube2x2x2SVG,llSVG:D(async()=>(await import("./puzzles-dynamic-side-events-AHFPWEBD.YHRyPmjr.js")).cube2x2x2LLSVG),pg:D(async()=>Lt("2x2x2")),stickeringMask:e=>Ie(Ft,e),stickerings:()=>tt("2x2x2",{use3x3x3Fallbacks:!0})},Ln={KeyI:new a("R"),KeyK:new a("R'"),KeyW:new a("B"),KeyO:new a("B'"),KeyS:new a("D"),KeyL:new a("D'"),KeyD:new a("L"),KeyE:new a("L'"),KeyJ:new a("U"),KeyF:new a("U'"),KeyH:new a("F"),KeyG:new a("F'"),KeyC:new a("l"),KeyR:new a("l'"),KeyU:new a("r"),KeyM:new a("r'"),KeyX:new a("d"),Comma:new a("d'"),KeyT:new a("x"),KeyY:new a("x"),KeyV:new a("x'"),KeyN:new a("x'"),Semicolon:new a("y"),KeyA:new a("y'"),KeyP:new a("z"),KeyQ:new a("z'"),KeyZ:new a("M'"),KeyB:new a("M"),Period:new a("M'"),Backquote:new C};function E(e,t,n,r){const i=[];for(const o of e){const u=a.fromString(o),{family:c,amount:m}=u;if(![-1,1].includes(m))throw new Error("Invalid config move");i.push({family:c,direction:m,type:t,from:n,to:r})}return i}var ve={"x axis":{sliceDiameter:3,extendsThroughEntirePuzzle:!0,moveSourceInfos:[...E(["R"],0,0,3),...E(["L'"],1,0,3),...E(["r","Rw"],2,0,2),...E(["l'","Lw'"],3,0,2),...E(["M'"],4,1,2),...E(["x","Uv","Dv'"],5,0,3)]},"y axis":{sliceDiameter:3,extendsThroughEntirePuzzle:!0,moveSourceInfos:[...E(["U"],0,0,3),...E(["D'"],1,0,3),...E(["u","Uw"],2,0,2),...E(["d'","Dw'"],3,0,2),...E(["E'"],4,1,2),...E(["y","Uv","Dv'"],5,0,3)]},"z axis":{sliceDiameter:3,extendsThroughEntirePuzzle:!0,moveSourceInfos:[...E(["F"],0,0,3),...E(["B'"],1,0,3),...E(["f","Fw"],2,0,3),...E(["b'","Bw'"],3,0,3),...E(["S"],4,1,2),...E(["z","Fv","Bv'"],5,0,3)]}},Oe={};for(const[e,t]of Object.entries(ve))for(const n of t.moveSourceInfos)Oe[n.family]={axis:e,moveSourceInfo:n};var Fn={},en;for(const e of Object.keys(ve)){const t={};Fn[e]=t;for(const n of ve[e].moveSourceInfos)(t[en=n.type]??(t[en]=[])).push(n)}var bn={};for(const e of Object.keys(ve)){const t=new Map;bn[e]=t;for(const n of ve[e].moveSourceInfos)t.get(n.from)||t.set(n.from,n)}function Ot(e,t){var r;const n=(r=Fn[e][t])==null?void 0:r[0];if(!n)throw new Error(`Could not find a reference move (axis: ${e}, move source type: ${t})`);return n}var $r=(e,t)=>Oe[e.family].axis===Oe[t.family].axis;function Qr(e,t,n,r){if(t+1===n){const f=bn[e].get(t);if(f)return new a(new X(f.family),r*f.direction)}const i=ve[e],{sliceDiameter:o}=i;if(t===0&&n===o){const f=Ot(e,5);return new a(new X(f.family),r*f.direction)}const u=t+n>o;u&&([t,n]=[o-n,o-t]);let c=t+1,m=n;const l=c===m;l&&(m=null),c===1&&(c=null),l&&c===1&&(m=null),!l&&m===2&&(m=null);const g=Ot(e,l?u?1:0:u?3:2);return new a(new X(g.family,m,c),r*g.direction)}function Vr(e,t=!0){if(e.length===0)return[];const n=Oe[e[0].family].axis,r=ve[n],{sliceDiameter:i}=r,o=new Map;let u=null;function c(f,S){let w=(o.get(f)??0)+S;t&&(w=w%4+5%4-1),w===0?o.delete(f):o.set(f,w)}let m=0;for(const f of Array.from(e).reverse()){m++;const{moveSourceInfo:S}=Oe[f.family],w=f.amount*S.direction;switch(S.type){case 0:{const R=(f.innerLayer??1)-1;c(R,w),c(R+1,-w);break}case 1:{const R=i-(f.innerLayer??1);c(R,w),c(R+1,-w);break}case 2:{c((f.outerLayer??1)-1,w),c(f.innerLayer??2,-w);break}case 3:{c(i-(f.innerLayer??2),w),c(i-((f.outerLayer??1)-1),-w);break}case 4:{c(S.from,w),c(S.to,-w);break}case 5:{c(0,w),c(i,-w);break}}[0,2].includes(o.size)&&(u={suffixLength:m,sliceDeltas:new Map(o)})}if(o.size===0)return[];if(!u)return e;let[l,d]=u.sliceDeltas.keys();l>d&&([l,d]=[d,l]);const g=u.sliceDeltas.get(l);return[...e.slice(0,-u.suffixLength),...g!==0?[Qr(n,l,d,g)]:[]]}var Hr={quantumMoveOrder:()=>4,axis:{areQuantumMovesSameAxis:$r,simplifySameAxisMoves:Vr}},En={id:"3x3x3",fullName:"3×3×3 Cube",inventedBy:["Ernő Rubik"],inventionYear:1974,kpuzzle:D(async()=>vn),svg:D(async()=>(await import("./puzzles-dynamic-3x3x3-JWIWLLZA.fR7zXD4k.js")).cube3x3x3SVG),llSVG:D(async()=>(await import("./puzzles-dynamic-3x3x3-JWIWLLZA.fR7zXD4k.js")).cube3x3x3LLSVG),llFaceSVG:D(async()=>(await import("./puzzles-dynamic-3x3x3-JWIWLLZA.fR7zXD4k.js")).cube3x3x3LLFaceSVG),pg:D(async()=>Lt("3x3x3")),stickeringMask:e=>Ie(En,e),stickerings:()=>tt("3x3x3"),puzzleSpecificSimplifyOptions:Hr,keyMapping:async()=>Ln},Zr={...Ln,KeyZ:new a("m'"),KeyB:new a("m"),Period:new a("m'")},bt=new ke({id:"4x4x4",fullName:"4×4×4 Cube"});bt.llSVG=D(async()=>(await import("./puzzles-dynamic-4x4x4-REUXFQJ4.BNnOy5ao.js")).cube4x4x4LLSVG);bt.keyMapping=async()=>Zr;async function Nn(e,t){const n=await e.kpuzzle(),r=new pn(n),i=new dn(n),o=()=>i.and([i.move("U"),i.not(i.or(i.moves(["F","BL","BR"])))]),u=()=>i.and([i.move("U"),i.not(i.move("F"))]),c=()=>i.or([u(),i.and([i.move("F"),i.not(i.or(i.moves(["U","BL","BR"])))])]),m=()=>i.not(i.or([i.and([i.move("U"),i.move("F")]),i.and([i.move("F"),i.move("BL")]),i.and([i.move("F"),i.move("BR")]),i.and([i.move("BL"),i.move("BR")])])),l=()=>i.not(i.or([i.and([i.move("F"),i.move("BL")]),i.and([i.move("F"),i.move("BR")]),i.and([i.move("BL"),i.move("BR")])]));switch(t){case"full":break;case"experimental-fto-fc":{r.set(i.not(o()),"Ignored");break}case"experimental-fto-f2t":{r.set(i.not(u()),"Ignored"),r.set(o(),"Dim");break}case"experimental-fto-sc":{r.set(i.not(c()),"Ignored"),r.set(u(),"Dim");break}case"experimental-fto-l2c":{r.set(i.not(m()),"Ignored"),r.set(c(),"Dim");break}case"experimental-fto-lbt":{r.set(i.not(l()),"Ignored"),r.set(m(),"Dim");break}case"experimental-fto-l3t":{r.set(l(),"Dim");break}default:console.warn(`Unsupported stickering for ${e.id}: ${t}. Setting all pieces to dim.`),r.set(i.and(i.moves([])),"Dim")}return r.toStickeringMask()}async function jr(){return["full","experimental-fto-fc","experimental-fto-f2t","experimental-fto-sc","experimental-fto-l2c","experimental-fto-lbt","experimental-fto-l3t"]}var Bn={KeyI:new a("R"),KeyK:new a("R'"),KeyW:new a("B"),KeyO:new a("B'"),KeyS:new a("D"),KeyL:new a("D'"),KeyD:new a("L"),KeyE:new a("L'"),KeyJ:new a("U"),KeyF:new a("U'"),KeyH:new a("F"),KeyG:new a("F'"),KeyN:new a("Rv'"),KeyC:new a("l"),KeyR:new a("l'"),KeyU:new a("r"),KeyM:new a("r'"),KeyX:new a("d"),Comma:new a("d'"),KeyT:new a("Lv'"),KeyY:new a("Rv"),KeyV:new a("Lv"),Semicolon:new a("Uv"),KeyA:new a("Uv'"),KeyP:new a("BR'"),KeyQ:new a("BL"),KeyZ:new a("BL'"),KeyB:new a("T"),Period:new a("BR"),Backquote:new C},Jr=class extends ie{constructor(){super({pgID:"skewb diamond",id:"baby_fto",fullName:"Baby FTO",inventedBy:["Uwe Mèffert"],setOrientationModTo1ForPiecesOfOrbits:["CENTERS"]});y(this,"svg",D(async()=>(await import("./puzzles-dynamic-unofficial-P3TW433I.cOWAxRTA.js")).babyFTOSVG));y(this,"keyMapping",async()=>Bn)}stickeringMask(t){return Nn(this,t)}},Yr=new Jr,Xr={id:"clock",fullName:"Clock",inventedBy:["Christopher C. Wiggs","Christopher J. Taylor"],inventionYear:1988,kpuzzle:D(async()=>new H((await import("./puzzles-dynamic-side-events-AHFPWEBD.YHRyPmjr.js")).clockJSON)),svg:D(async()=>(await import("./puzzles-dynamic-side-events-AHFPWEBD.YHRyPmjr.js")).clockSVG)},ei=class extends ie{constructor(){super({pgID:"FTO",id:"fto",fullName:"Face-Turning Octahedron",inventedBy:["Karl Rohrbach","David Pitcher"],inventionYear:1983});y(this,"stickerings",jr);y(this,"svg",D(async()=>(await import("./puzzles-dynamic-unofficial-P3TW433I.cOWAxRTA.js")).ftoSVG));y(this,"keyMapping",async()=>Bn)}stickeringMask(t){return Nn(this,t)}},ti=new ei,Mt="d f 0.56",ni={id:"kilominx",fullName:"Kilominx",kpuzzle:D(()=>Cr(Mt,{includeCenterOrbits:!1,includeEdgeOrbits:!1})),pg:()=>xn(Mt,{includeCenterOrbits:!1,includeEdgeOrbits:!1}),svg:D(async()=>(await import("./puzzles-dynamic-unofficial-P3TW433I.cOWAxRTA.js")).kilominxSVG)},ri={id:"loopover",fullName:"Loopover",inventedBy:["Cary Huang"],inventionYear:2018,kpuzzle:D(async()=>new H((await import("./puzzles-dynamic-unofficial-P3TW433I.cOWAxRTA.js")).loopoverJSON)),svg:async()=>(await import("./puzzles-dynamic-unofficial-P3TW433I.cOWAxRTA.js")).loopoverSVG};async function ii(e,t){return(await zn()).includes(t)?Ie(e,t):(console.warn(`Unsupported stickering for ${e.id}: ${t}. Setting all pieces to dim.`),Ie(e,"full"))}var ai=Z(()=>tt("megaminx"));function zn(){return ai}var oi={KeyI:new a("R"),KeyK:new a("R'"),KeyW:new a("B"),KeyO:new a("B'"),KeyS:new a("FR"),KeyL:new a("FR'"),KeyD:new a("L"),KeyE:new a("L'"),KeyJ:new a("U"),KeyF:new a("U'"),KeyH:new a("F"),KeyG:new a("F'"),KeyC:new a("Lw"),KeyR:new a("Lw'"),KeyU:new a("Rw"),KeyM:new a("Rw'"),KeyX:new a("d"),Comma:new a("d'"),KeyT:new a("Rv"),KeyY:new a("Rv"),KeyV:new a("Rv'"),KeyN:new a("Rv'"),Semicolon:new a("y"),KeyA:new a("y'"),KeyP:new a("z"),KeyQ:new a("z'"),KeyZ:new a("2L'"),KeyB:new a("2R"),Period:new a("2R'"),Backquote:new C},si=class extends ie{constructor(){super({id:"megaminx",fullName:"Megaminx",inventionYear:1981});y(this,"stickerings",zn);y(this,"llSVG",D(async()=>(await import("./puzzles-dynamic-megaminx-2LVHIDL4.Cm8jQJ-N.js")).megaminxLLSVG));y(this,"keyMapping",async()=>oi)}stickeringMask(t){return ii(this,t)}},ui=new si,li={id:"melindas2x2x2x2",fullName:"Melinda's 2×2×2×2",inventedBy:["Melinda Green"],kpuzzle:D(async()=>new H((await import("./puzzles-dynamic-side-events-AHFPWEBD.YHRyPmjr.js")).melindas2x2x2x2OrbitJSON)),svg:D(async()=>(await import("./puzzles-dynamic-side-events-AHFPWEBD.YHRyPmjr.js")).melindas2x2x2x2OrbitSVG)},ci=class extends ie{constructor(){super({id:"pyraminx",fullName:"Pyraminx",inventedBy:["Uwe Meffert"]});y(this,"svg",D(async()=>(await import("./puzzles-dynamic-side-events-AHFPWEBD.YHRyPmjr.js")).pyraminxSVG))}},mi=new ci,fi={id:"redi_cube",fullName:"Redi Cube",inventedBy:["Oskar van Deventer"],inventionYear:2009,kpuzzle:D(async()=>new H((await import("./puzzles-dynamic-unofficial-P3TW433I.cOWAxRTA.js")).rediCubeJSON)),svg:async()=>(await import("./puzzles-dynamic-unofficial-P3TW433I.cOWAxRTA.js")).rediCubeSVG},pi={id:"square1",fullName:"Square-1",inventedBy:["Karel Hršel","Vojtech Kopský"],inventionYear:1990,kpuzzle:D(async()=>new H((await import("./puzzles-dynamic-side-events-AHFPWEBD.YHRyPmjr.js")).sq1HyperOrbitJSON)),svg:D(async()=>(await import("./puzzles-dynamic-side-events-AHFPWEBD.YHRyPmjr.js")).sq1HyperOrbitSVG)},di={id:"tri_quad",fullName:"TriQuad",inventedBy:["Bram Cohen","Carl Hoff"],inventionYear:2018,kpuzzle:D(async()=>new H((await import("./puzzles-dynamic-side-events-AHFPWEBD.YHRyPmjr.js")).triQuadJSON)),svg:D(async()=>(await import("./puzzles-dynamic-side-events-AHFPWEBD.YHRyPmjr.js")).triQuadSVG)},ne={"3x3x3":En,"2x2x2":Ft,"4x4x4":bt,"5x5x5":new ke({id:"5x5x5",fullName:"5×5×5 Cube"}),"6x6x6":new ke({id:"6x6x6",fullName:"6×6×6 Cube"}),"7x7x7":new ke({id:"7x7x7",fullName:"7×7×7 Cube"}),"40x40x40":new ke({id:"40x40x40",fullName:"40×40×40 Cube"}),clock:Xr,megaminx:ui,pyraminx:mi,skewb:new ie({id:"skewb",fullName:"Skewb",inventedBy:["Tony Durham"]}),square1:pi,fto:ti,gigaminx:new ie({id:"gigaminx",fullName:"Gigaminx",inventedBy:["Tyler Fox"],inventionYear:2006}),master_tetraminx:new ie({pgID:"master tetraminx",id:"master_tetraminx",fullName:"Master Tetraminx",inventedBy:["Katsuhiko Okamoto"],inventionYear:2002}),kilominx:ni,redi_cube:fi,melindas2x2x2x2:li,loopover:ri,tri_quad:di,baby_fto:Yr},Pn=2**53,hi=2097152,wi=11,ut=new Uint32Array(2);function gi(){globalThis.crypto.getRandomValues(ut);const e=ut[0],t=ut[1];return Math.floor(e*hi)+(t>>wi)}function xi(e){if(typeof e!="number"||e<0||Math.floor(e)!==e)throw new Error("randomUIntBelow() not called with a positive integer value.");if(e>Pn)throw new Error(`Called randomUIntBelow() with max === ${e}, which is larger than JavaScript can handle with integer precision.`)}function vi(e){xi(e);for(var t,n,r;;)if(t=gi(),n=Math.floor(t/e),r=n*e,r<=Pn-e)return t-r}function An(e){return e[vi(e.length)]}var kn=!1;function yi(e){kn=e}function j(){if(!kn)throw new Error("Must be called from inside a worker, to avoid impact on page performance. Try importing from the top level of `cubing/solve`?")}function Tn(e,t){const n=new yt;n.experimentalPushAlg(e);for(const r of t){const i=An(r);i!==null&&n.push(a.fromString(i))}return n.toAlg()}var Un=Z(()=>import("./search-dynamic-solve-3x3x3-QHRLSVAC.6iYVGW9D.js")),Di="UF UR UB UL DF DR DB DL FR FL BR BL".split(" "),Si="UFR URB UBL ULF DRF DFL DLB DBR".split(" "),Ri="U L F R B D".split(" "),Li=[[1,2,0],[0,2,0],[1,1,0],[0,3,0],[2,0,0],[0,1,0],[1,3,0],[0,0,0],[1,0,0],[1,0,2],[0,1,1],[1,1,1],[0,8,1],[2,3,0],[0,10,1],[1,4,1],[0,5,1],[1,7,2],[1,3,2],[0,0,1],[1,0,1],[0,9,0],[2,2,0],[0,8,0],[1,5,1],[0,4,1],[1,4,2],[1,5,0],[0,4,0],[1,4,0],[0,7,0],[2,5,0],[0,5,0],[1,6,0],[0,6,0],[1,7,0],[1,2,2],[0,3,1],[1,3,1],[0,11,1],[2,1,0],[0,9,1],[1,6,1],[0,7,1],[1,5,2],[1,1,2],[0,2,1],[1,2,1],[0,10,0],[2,4,0],[0,11,0],[1,7,1],[0,6,1],[1,6,2]];function Kt(e,t){return e.slice(t)+e.slice(0,t)}function Fi(e){const t=[[],[]];for(let n=0;n<6;n++)if(e.patternData.CENTERS.pieces[n]!==n)throw new Error("non-oriented puzzles are not supported");for(let n=0;n<12;n++)t[0].push(Kt(Di[e.patternData.EDGES.pieces[n]],e.patternData.EDGES.orientation[n]));for(let n=0;n<8;n++)t[1].push(Kt(Si[e.patternData.CORNERS.pieces[n]],e.patternData.CORNERS.orientation[n]));return t.push(Ri),t}function bi(e){const t=Fi(e);return Li.map(([n,r,i])=>t[n][r][i]).join("")}function Gt(e,t){const n=new T(e.kpuzzle,{EDGES:e.patternData.EDGES,CORNERS:e.patternData.CORNERS,CENTERS:{pieces:e.patternData.CENTERS.pieces,orientation:new Array(6).fill(0)}}).experimentalToTransformation(),r=new T(t.kpuzzle,{EDGES:t.patternData.EDGES,CORNERS:t.patternData.CORNERS,CENTERS:{pieces:t.patternData.CENTERS.pieces,orientation:new Array(6).fill(0)}}).experimentalToTransformation();return n.isIdentical(r)}function Ei(e,t){if(Gt(e.defaultPattern(),t))return!1;for(const n of"ULFRBD")for(let r=1;r<4;r++){const i=e.moveToTransformation(new a(n,r)).toKPattern();if(Gt(i,t))return!1}return!0}var Ni=[["R U'","R2 B","D2 B2","D' L B'","R' U'","B","D B2","R' B","L' U","L2 B'","B2","D L B'","L U","B'","U'","R B","D' B2","L B'","U2","U L' B'","","U' L' B'","U","L' B'"],["F2 L2","F' L'","R' F L2","D' L2","F L2","F2 L'","R' F' L'","R2 F L2","R2 F2 L'","L2","F L'","D' L","D2 L2","R2 F' L'","D L","","L2 F L'","L F' L2","L F L'","F' L2","L'","D L2","D F L'","L"],["R B U2 B'","R2 B U' B'","F2 B U B'","F B2 L' B2","B2 L B2","B U' B'","R2 B U2 B'","R' B U' B'","B2 L' B2","F B U B'","B2 U' B2","B' L B","L F' B D' B'","B' U' B2 D B'","B U2 B'","R B U' B'","B2 L2 B2","D' B' L B","B U B'","F' B2 L' B2","","B2 L' B' U' B'"],["U F2 L2 U'","F' U L' U'","F2 U L' U'","U F L2 U'","U2 B2 U2","R' U' B U","D2 U L U'","D U2 B' U2","U L2 U'","F U L' U'","D U L U'","U2 B' U2","","U2 B' U' L' U'","U2 L' U2","U' B U","U L U'","D' U2 B' U2","U L' U'","U2 B U2"],["R' D' F2","F'","F2","D R F'","R D' F2","R2 F'","D' F2","R F'","F2 R' D' F2","F","D2 F2","D' R F'","R2 D' F2","R' F'","D F2","D2 R F'","","F R' D' F2"],["R' D2 F' D F","R F2 R2 F2","R2 F' D2 F","F' R2 D2 F","L D' L'","D F' D2 F","F2 R2 F2","R F' D2 F","F' R2 D' F","F' R' D2 F","F2 R' F2","L D L'","F' R D' F","F2 R F2","F' D2 F","","L D2 R D' L'","F' D2 F' R F2","D2 R2 F2 R2 F2","D F' D' F","F' D F"],["U F2 U'","R U F' U'","D R U F2 U'","U F U'","R2 U F2 U'","R' U F' U'","R U F2 U'","R2 U F' U'","","U L D L' F U'","F2 D' R D F2","D2 U F U'","R' U F2 U'","U F' U'","F2 D2 R D2 F2","D U F U'"],["R2","R' B' D B","D R'","F' R2 F","","R B' D B","R'","B' D B","D' R'","D2 F' R2 F","R","R2 B' D B","D2 R'","B' D' B"],["R2 D' R2","F' R' F R","R D' R2 D R'","D2 R2 D2 R2","R' D' F' R F","U F D F' U'","","R2 D2 B R' B' R'","R' F D' F2 R F","R2 D R2","F2 U F U' F","R' D F' R F","D R2 D2 R2","U F D' F' U'","D R' D2 F' R F","R2 D2 R2","U F D2 F' U'","R' D2 F' R F"],["B R B'","F D F' B R2 B'","D B R2 B'","D2 B R' B'","B R2 B'","D B R' B'","D' B R2 B'","B R' B'","","B R2 B' D B R' B'","D2 B R2 B'","D' B R' B'"],["","R' D R F D2 F'","R' D R","D F D' F'","R F' R' F","F D' F'","R' D' R","F D2 F'","R' D2 R","F D F'"],["","F2 D2 R F' R' D2 F' D2 F'","F2 D2 F' D' F D' F' D2 F'","F2 D F2 D F2 D2 F2","D2 F L D2 L' D2 F'","D F D2 L D2 L' F'","R' D B' D2 B D' R","R' D2 B' D2 B R","F D2 F' D F D F'","F D' L D2 L' D F'","B D' F D B' D' F'","F D2 L D2 L' F'","F D' L D L' D F'","F L D2 L' D2 F'","R' B' D2 B D2 R"],["D'","F L D L' D' F'","D2","L B D B' D' L'","D","B' L' D' L D B","","D F L D L' D' F'"],["F' D2 F D F' D F","F' D' R' D R F","F' R' D' R D F","B D R D' R' B'","","D B' D' L' D L B"],["D F D F' D F D2 F'","F' U2 B' R' B U2 F' L F' L' F'","","D2 L D L2 F L F2 D F"],["L B' L' F L B L' F'","F2 U F' D2 F U' F' D2 F'","D' F' D B D' F D B'","F L2 F R2 F' L2 F R2 F2","D B D' F' D B' D' F","R F L F' R' F L' F'","","D2 B L' U2 L B' D2 B L' U2 L B'","D2 F R' U2 R F' D2 F R' U2 R F'","R F L' F' R' F L F'","D F D' B' D F' D' B","L2 F2 L' B2 L F2 L' B2 L'"],["L B R' B' L' B R B'","R' B R F' R' B' R F","L D2 L U L' D2 L U' L2","","D2 B' D2 F D' L2 F L2 F' D2 B D' F'","D2 F' R' F R2 B' D2 B D2 R' F D2 F'","L B L' F L B' L' F'","F' D2 F' U' F D2 F' U F2","D' B' D F D' B D F'"],["","D2 F' L U2 L' F D2 F' L U2 L' F","D2 B' R U2 R' B D2 B' R U2 R' B"]];async function Cn(){const e=await ne["3x3x3"].kpuzzle();let t=e.defaultPattern();for(const n of Ni)t=t.applyAlg(p.fromString(An(n)));return Ei(e,t)?t:Cn()}async function In(e){return j(),p.fromString((await Un).solvePattern(bi(e)))}async function On(){return In(await Cn())}async function Bi(){(await Un).initialize()}var zi=[[null,"Rw","Rw2","Rw'","Fw","Fw'"],[null,"Dw","Dw2","Dw'"]];async function Pi(){return Tn(await On(),zi)}var Ai=2;function ki(e,t){const n=[];for(const r of t){const i=new a(r);if(i.amount!==1)throw new Error("SGS cannot handle def moves with an amount other than 1 yet.");let o=e.identityTransformation();for(let u=1;o=o.applyMove(i),!o.isIdentityTransformation();u++)n.push({move:i.modified({amount:u}),transformation:o})}return n}var rt=class{constructor(e,t,n){y(this,"searchMoves");this.kpuzzle=e,this.sgs=t,this.searchMoves=ki(this.kpuzzle,n??Object.keys(this.kpuzzle.definition.moves))}async solve(e,t=Ai,n){const r=e.experimentalToTransformation();if(!r)throw new Error("distinguishable pieces are not supported in tremble solver yt");let i=null,o=1e6;const u=(c,m,l)=>{if(m===0){const d=this.sgsPhaseSolve(c,o);if(!d)return;const g=l.concat(d).experimentalSimplify({cancel:{directional:"any-direction",puzzleSpecificModWrap:"canonical-centered"},puzzleSpecificSimplifyOptions:{quantumMoveOrder:n}}),f=qr(g);(i===null||f<o)&&(i=g,o=f);return}for(const d of this.searchMoves)u(c.applyTransformation(d.transformation),m-1,l.concat([d.move]))};for(let c=0;c<=t;c++)u(r,c,new p);if(i===null)throw new Error("SGS search failed.");return i}sgsPhaseSolve(e,t){const n=new yt;let r=e;for(const i of this.sgs.ordering){const o=i.pieceOrdering;let u="";const c=r.invert();for(let l=0;l<o.length;l++){const d=o[l],g=d.orbitName,f=d.permutationIdx;u+=` ${c.transformationData[g].permutation[f]} ${c.transformationData[g].orientationDelta[f]}`}const m=i.lookup[u];if(!m)throw new Error("Missing algorithm in sgs or esgs?");if(n.experimentalPushAlg(m.alg),n.experimentalNumAlgNodes()>=t)return null;r=r.applyTransformation(m.transformation);for(let l=0;l<o.length;l++){const d=o[l],g=d.orbitName,f=d.permutationIdx;if(r.transformationData[g].permutation[f]!==f||r.transformationData[g].orientationDelta[f]!==0)throw new Error("bad SGS :-(")}}return n.toAlg()}},Mn=Z(async()=>import("./twsearch-ITWEA5PO.SAEP5h98.js"));async function Kn(e,t,n){const{wasmTwsearch:r}=await Mn;return r(e,t,n)}async function Ti(e){const{wasmRandomScrambleForEvent:t}=await Mn;return t(e)}var oe=Z(()=>import("./search-dynamic-sgs-side-events-FTWMZ5ZJ.DvYtvvlz.js")),_t=null;async function Ui(){return _t||(_t=(async()=>{const e=await(await oe).cachedData222();return new rt(await ne["2x2x2"].kpuzzle(),e,"URFLBD".split(""))})())}async function Ci(){await Ui()}async function Ii(e){return j(),Kn((await Ft.kpuzzle()).definition,e,{generatorMoves:"UFLR".split("")})}var Gn=Z(()=>import("./search-dynamic-solve-4x4x4-6MKLH6KJ.CS2wOJNH.js")),Oi=[[null,"x","x2","x'","z","z'"],[null,"y","y2","y'"]];async function Mi(){return(await Gn).initialize()}async function _n(){return j(),(await Gn).random444Scramble()}async function Ki(){return Tn(await _n(),Oi)}var Gi=Z(()=>import("./search-dynamic-solve-fto-5YRST2XM.SCrZJvQa.js"));Z(()=>import("./search-dynamic-sgs-unofficial-ZYGVRJQK.quG7_zsu.js"));async function _i(){return j(),new p(await(await Gi).getRandomFTOScramble())}var qi=Z(()=>import("./search-dynamic-solve-kilominx-W64XQPBF.B6d5nIyi.js"));async function Wi(){return j(),(await qi).getRandomKilominxScramble()}var $i=Z(()=>import("./search-dynamic-solve-master_tetraminx-3D4MBF3V.CJuqiOwM.js"));async function Qi(){return j(),new p(await(await $i).randomMasterTetraminxScrambleString())}var Vi=2,qt=null;async function Hi(){return qt||(qt=(async()=>{const e=await(await oe).cachedSGSDataMegaminx();return new rt(await(await oe).cachedMegaminxKPuzzleWithoutMO(),e,["U","R","F","L","BR","BL","FR","FL","DR","DL","B","D"])})())}async function Zi(e){j();const t=await Hi(),n=structuredClone(e.patternData);n.CENTERS.orientation=new Array(12).fill(0);const r=new T(await(await oe).cachedMegaminxKPuzzleWithoutMO(),n);return await t.solve(r,Vi,()=>5)}var ji=3,Wt=null;async function Ji(){return Wt||(Wt=(async()=>{const e=await(await oe).sgsDataPyraminx();return new rt(await ne.pyraminx.kpuzzle(),e,"RLUB".split(""))})())}async function Yi(e){return j(),await(await Ji()).solve(e,ji,()=>3)}var Xi=Z(()=>import("./search-dynamic-sgs-unofficial-ZYGVRJQK.quG7_zsu.js"));async function ea(){return j(),(await Xi).getRandomRediCubeScramble()}var ta=3,$t=null;async function na(){return $t||($t=(async()=>{const e=await(await oe).sgsDataSkewb();return new rt(await(await oe).skewbKPuzzleWithoutMOCached(),e,"RLUB".split(""))})())}async function ra(e){return new T(await(await oe).skewbKPuzzleWithoutMOCached(),{CORNERS:e.patternData.CORNERS,CENTERS:{pieces:e.patternData.CENTERS.pieces,orientation:new Array(6).fill(0)}})}async function ia(e){return j(),await(await na()).solve(await ra(e),ta,r=>r.family==="y"?4:3)}var aa=1e3;yi(!0);var qn=!0;function oa(e){qn=e}function Qt(){return(typeof performance>"u"?Date:performance).now()}async function M(e,t,n){if(!qn)return t();const r=Qt(),i=t();i!=null&&i.then&&await i;const o=Qt();return console.warn(`${e}${n!=null&&n.isPrefetch?" (prefetched)":""}: ${Math.round(o-r)}ms`),i}var lt=new Map,ct=null,Vt;async function Ht(e,t){return Vt=(async()=>{await Vt;function n(){return M(`wasmRandomScrambleForEvent(${JSON.stringify(e)})`,()=>Ti(e),{isPrefetch:t==null?void 0:t.isPrefetch})}switch(e){case"222":return(await n()).experimentalSimplify({puzzleSpecificSimplifyOptions:{quantumMoveOrder:()=>4}});case"555":case"666":case"777":case"333fm":case"minx":case"pyram":case"skewb":case"sq1":case"555bf":case"baby_fto":return n();case"333":case"333oh":case"333ft":return M("random333Scramble",On,{isPrefetch:t==null?void 0:t.isPrefetch});case"333bf":case"333mbf":return M("random333OrientedScramble",Pi);case"444":return M("random444Scramble",_n,{isPrefetch:t==null?void 0:t.isPrefetch});case"444bf":return M("random444OrientedScramble",Ki);case"fto":return M("randomFTOScramble",_i,{isPrefetch:t==null?void 0:t.isPrefetch});case"master_tetraminx":return M("randomMasterTetraminxScramble",Qi);case"kilominx":return M("randomKilominxScramble",Wi,{isPrefetch:t==null?void 0:t.isPrefetch});case"redi_cube":return M("randomRediCubeScramble",ea,{isPrefetch:t==null?void 0:t.isPrefetch});default:throw new Error(`unsupported event: ${e}`)}})()}var mt="auto",Wn={initialize:async e=>{switch(e){case"222":return M("preInitialize222",Ci);case"333":case"333oh":case"333ft":return M("initialize333",Bi);case"444":return M("initialize444",Mi);default:throw new Error(`unsupported event: ${e}`)}},setScramblePrefetchLevel(e){mt=e},randomScrambleForEvent:async e=>{let t=lt.get(e);return t?lt.delete(e):t=Ht(e),mt!=="none"&&t.then(()=>{ct&&clearTimeout(ct),ct=setTimeout(()=>{lt.set(e,Ht(e,{isPrefetch:!0}))},mt==="immediate"?0:aa)}),t},randomScrambleStringForEvent:async e=>(await Wn.randomScrambleForEvent(e)).toString(),solve333ToString:async e=>{const t=new T(await ne["3x3x3"].kpuzzle(),e);return(await In(t)).toString()},solve222ToString:async e=>{const t=new T(await ne["2x2x2"].kpuzzle(),e);return(await Ii(t)).toString()},solveSkewbToString:async e=>{const t=new T(await ne.skewb.kpuzzle(),e);return(await ia(t)).toString()},solvePyraminxToString:async e=>{const t=new T(await ne.pyraminx.kpuzzle(),e);return(await Yi(t)).toString()},solveMegaminxToString:async e=>{const t=new T(await ne.megaminx.kpuzzle(),e);return(await Zi(t)).toString()},setDebugMeasurePerf:async e=>{oa(e)},solveTwsearchToString:async(e,t,n)=>{const r=new H(e),i=new T(r,t);return(await Kn(e,i,n)).toString()}};Hn(Wn);var la=Object.freeze({__proto__:null});export{p as A,H as K,a as M,X as Q,vi as a,Ft as c,la as i,ne as p,On as r};
