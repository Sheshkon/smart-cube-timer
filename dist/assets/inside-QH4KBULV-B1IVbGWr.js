const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/twsearch-P7UCZ2FN-CjCHYkRg.js","assets/index-89KQPpsQ.js","assets/index-BpCsZESN.css","assets/search-dynamic-sgs-side-events-CR5RLWPU-DbIAvls4.js","assets/chunk-BQNTAVTA-BkTYeDmU.js","assets/search-dynamic-solve-4x4x4-MCEJ4TLC-CnhAcYoq.js","assets/search-dynamic-solve-fto-5YRST2XM-CS76UuEO.js","assets/search-dynamic-sgs-unofficial-BR77UWSI-D0xpMSZd.js","assets/search-dynamic-solve-kilominx-W64XQPBF-BSz8zU7T.js","assets/search-dynamic-solve-master_tetraminx-3D4MBF3V-BsFpnRUv.js","assets/search-dynamic-solve-sq1-YESVPPLF-Dy_8-M9d.js"])))=>i.map(i=>d[i]);
var B=Object.defineProperty;var K=(e,a,r)=>a in e?B(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r;var P=(e,a,r)=>K(e,typeof a!="symbol"?a+"":a,r);import{s as u,_ as f,K as v,u as b,v as U,w as V,x as w,y as W,z as q,A as $,H as G,I as H,J as j,L as g,M as J,N as Q,P as X}from"./index-89KQPpsQ.js";import{e as Y}from"./search-worker-entry-Ka8sh13M.js";var Z=2;function ee(e,a){const r=[];for(const t of a){const n=new J(t);if(n.amount!==1)throw new Error("SGS cannot handle def moves with an amount other than 1 yet.");let i=e.identityTransformation();for(let d=1;i=i.applyMove(n),!i.isIdentityTransformation();d++)r.push({move:n.modified({amount:d}),transformation:i})}return r}var E=class{constructor(e,a,r){P(this,"searchMoves");this.kpuzzle=e,this.sgs=a,this.searchMoves=ee(this.kpuzzle,r??Object.keys(this.kpuzzle.definition.moves))}async solve(e,a=Z,r){const t=e.experimentalToTransformation();if(!t)throw new Error("distinguishable pieces are not supported in tremble solver yt");let n=null,i=1e6;const d=(l,y,s)=>{if(y===0){const o=this.sgsPhaseSolve(l,i);if(!o)return;const S=s.concat(o).experimentalSimplify({cancel:{directional:"any-direction",puzzleSpecificModWrap:"canonical-centered"},puzzleSpecificSimplifyOptions:{quantumMoveOrder:r}}),m=Q(S);(n===null||m<i)&&(n=S,i=m);return}for(const o of this.searchMoves)d(l.applyTransformation(o.transformation),y-1,s.concat([o.move]))};for(let l=0;l<=a;l++)d(t,l,new g);if(n===null)throw new Error("SGS search failed.");return n}sgsPhaseSolve(e,a){const r=new X;let t=e;for(const n of this.sgs.ordering){const i=n.pieceOrdering;let d="";const l=t.invert();for(let s=0;s<i.length;s++){const o=i[s],S=o.orbitName,m=o.permutationIdx;d+=` ${l.transformationData[S].permutation[m]} ${l.transformationData[S].orientationDelta[m]}`}const y=n.lookup[d];if(!y)throw new Error("Missing algorithm in sgs or esgs?");if(r.experimentalPushAlg(y.alg),r.experimentalNumAlgNodes()>=a)return null;t=t.applyTransformation(y.transformation);for(let s=0;s<i.length;s++){const o=i[s],S=o.orbitName,m=o.permutationIdx;if(t.transformationData[S].permutation[m]!==m||t.transformationData[S].orientationDelta[m]!==0)throw new Error("bad SGS :-(")}}return r.toAlg()}},k=u(async()=>f(()=>import("./twsearch-P7UCZ2FN-CjCHYkRg.js"),__vite__mapDeps([0,1,2])));async function A(e,a,r){const{wasmTwsearch:t}=await k;return t(e,a,r)}async function ae(e){const{wasmRandomScrambleForEvent:a}=await k;return a(e)}var h=u(()=>f(()=>import("./search-dynamic-sgs-side-events-CR5RLWPU-DbIAvls4.js"),__vite__mapDeps([3,1,2,4]))),z=null;async function re(){return z||(z=(async()=>{const e=await(await h).cachedData222();return new E(await b["2x2x2"].kpuzzle(),e,"URFLBD".split(""))})())}async function te(){await re()}async function ne(e){return w(),A((await W.kpuzzle()).definition,e,{generatorMoves:"UFLR".split("")})}var F=u(()=>f(()=>import("./search-dynamic-solve-4x4x4-MCEJ4TLC-CnhAcYoq.js"),__vite__mapDeps([5,1,2]))),ie=[[null,"x","x2","x'","z","z'"],[null,"y","y2","y'"]];async function ce(){return(await F).initialize()}async function C(){return w(),(await F).random444Scramble()}async function oe(){return j(await C(),ie)}var se=u(()=>f(()=>import("./search-dynamic-solve-fto-5YRST2XM-CS76UuEO.js"),__vite__mapDeps([6,1,2])));u(()=>f(()=>import("./search-dynamic-sgs-unofficial-BR77UWSI-D0xpMSZd.js"),__vite__mapDeps([7,4,1,2])));async function le(){return w(),new g(await(await se).getRandomFTOScramble())}var me=u(()=>f(()=>import("./search-dynamic-solve-kilominx-W64XQPBF-BSz8zU7T.js"),__vite__mapDeps([8,1,2])));async function ue(){return w(),(await me).getRandomKilominxScramble()}var fe=u(()=>f(()=>import("./search-dynamic-solve-master_tetraminx-3D4MBF3V-BsFpnRUv.js"),__vite__mapDeps([9,1,2])));async function we(){return w(),new g(await(await fe).randomMasterTetraminxScrambleString())}var de=2,x=null;async function Se(){return x||(x=(async()=>{const e=await(await h).cachedSGSDataMegaminx();return new E(await(await h).cachedMegaminxKPuzzleWithoutMO(),e,["U","R","F","L","BR","BL","FR","FL","DR","DL","B","D"])})())}async function ve(e){w();const a=await Se(),r=structuredClone(e.patternData);r.CENTERS.orientation=new Array(12).fill(0);const t=new v(await(await h).cachedMegaminxKPuzzleWithoutMO(),r);return await a.solve(t,de,()=>5)}var he=3,R=null;async function be(){return R||(R=(async()=>{const e=await(await h).sgsDataPyraminx();return new E(await b.pyraminx.kpuzzle(),e,"RLUB".split(""))})())}async function ye(e){return w(),await(await be()).solve(e,he,()=>3)}var ge=u(()=>f(()=>import("./search-dynamic-sgs-unofficial-BR77UWSI-D0xpMSZd.js"),__vite__mapDeps([7,4,1,2])));async function Ee(){return w(),(await ge).getRandomRediCubeScramble()}var _e=3,M=null;async function Te(){return M||(M=(async()=>{const e=await(await h).sgsDataSkewb();return new E(await(await h).skewbKPuzzleWithoutMOCached(),e,"RLUB".split(""))})())}async function pe(e){return new v(await(await h).skewbKPuzzleWithoutMOCached(),{CORNERS:e.patternData.CORNERS,CENTERS:{pieces:e.patternData.CENTERS.pieces,orientation:new Array(6).fill(0)}})}async function Pe(e){return w(),await(await Te()).solve(await pe(e),_e,t=>t.family==="y"?4:3)}var ze=u(()=>f(()=>import("./search-dynamic-solve-sq1-YESVPPLF-Dy_8-M9d.js"),__vite__mapDeps([10,1,2])));async function xe(){return g.fromString(await(await ze).getRandomSquare1ScrambleString())}var Re=1e3;q(!0);var I=!0;function Me(e){I=e}function O(){return(typeof performance>"u"?Date:performance).now()}async function c(e,a,r){if(!I)return a();const t=O(),n=a();n!=null&&n.then&&await n;const i=O();return console.warn(`${e}${r!=null&&r.isPrefetch?" (prefetched)":""}: ${Math.round(i-t)}ms`),n}var _=new Map,T=null,D;async function L(e,a){return D=(async()=>{await D;function r(){return c(`wasmRandomScrambleForEvent(${JSON.stringify(e)})`,()=>ae(e),{isPrefetch:a==null?void 0:a.isPrefetch})}switch(e){case"222":return(await r()).experimentalSimplify({puzzleSpecificSimplifyOptions:{quantumMoveOrder:()=>4}});case"555":case"666":case"777":case"333fm":case"minx":case"pyram":case"skewb":case"555bf":case"baby_fto":return r();case"333":case"333oh":case"333ft":return c("random333Scramble",G,{isPrefetch:a==null?void 0:a.isPrefetch});case"333bf":case"333mbf":return c("random333OrientedScramble",$);case"444":return c("random444Scramble",C,{isPrefetch:a==null?void 0:a.isPrefetch});case"444bf":return c("random444OrientedScramble",oe);case"sq1":return c("getRandomSquare1Scramble",xe,{isPrefetch:a==null?void 0:a.isPrefetch});case"fto":return c("randomFTOScramble",le,{isPrefetch:a==null?void 0:a.isPrefetch});case"master_tetraminx":return c("randomMasterTetraminxScramble",we);case"kilominx":return c("randomKilominxScramble",ue,{isPrefetch:a==null?void 0:a.isPrefetch});case"redi_cube":return c("randomRediCubeScramble",Ee,{isPrefetch:a==null?void 0:a.isPrefetch});default:throw new Error(`unsupported event: ${e}`)}})()}var p="auto",N={initialize:async e=>{switch(e){case"222":return c("preInitialize222",te);case"333":case"333oh":case"333ft":return c("initialize333",H);case"444":return c("initialize444",ce);default:throw new Error(`unsupported event: ${e}`)}},setScramblePrefetchLevel(e){p=e},randomScrambleForEvent:async e=>{let a=_.get(e);return a?_.delete(e):a=L(e),p!=="none"&&a.then(()=>{T&&clearTimeout(T),T=setTimeout(()=>{_.set(e,L(e,{isPrefetch:!0}))},p==="immediate"?0:Re)}),a},randomScrambleStringForEvent:async e=>(await N.randomScrambleForEvent(e)).toString(),solve333ToString:async e=>{const a=new v(await b["3x3x3"].kpuzzle(),e);return(await U(a)).toString()},solve222ToString:async e=>{const a=new v(await b["2x2x2"].kpuzzle(),e);return(await ne(a)).toString()},solveSkewbToString:async e=>{const a=new v(await b.skewb.kpuzzle(),e);return(await Pe(a)).toString()},solvePyraminxToString:async e=>{const a=new v(await b.pyraminx.kpuzzle(),e);return(await ye(a)).toString()},solveMegaminxToString:async e=>{const a=new v(await b.megaminx.kpuzzle(),e);return(await ve(a)).toString()},setDebugMeasurePerf:async e=>{Me(e)},solveTwsearchToString:async(e,a,r)=>{const t=new V(e),n=new v(t,a);return(await A(e,n,r)).toString()}};Y(N);
