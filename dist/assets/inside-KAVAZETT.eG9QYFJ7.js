const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/twsearch-ITWEA5PO.3kmZnQFV.js","assets/index.MZ8s90wo.js","assets/index.C8FAxT10.css","assets/search-dynamic-sgs-side-events-FTWMZ5ZJ.Bl7JTvk3.js","assets/chunk-BQNTAVTA.B54hpPqa.js","assets/search-dynamic-solve-4x4x4-6MKLH6KJ.DPFmgJ2q.js","assets/search-dynamic-solve-fto-5YRST2XM.BfTPKpw-.js","assets/search-dynamic-sgs-unofficial-ZYGVRJQK.Bor0WlVl.js","assets/search-dynamic-solve-kilominx-W64XQPBF.qmU3GRnW.js","assets/search-dynamic-solve-master_tetraminx-3D4MBF3V.Bq9ColBv.js"])))=>i.map(i=>d[i]);
import{f as v,_ as h,s as B,K as N,i as d,p as b,j as K,m as u,k as U,r as W,A as _,l as V,o as $,M as G,q as j,t as q,u as H}from "dist/assets/index.MZ8s90wo.js";import{e as J}from "dist/assets/search-worker-entry.BKUVMMn7.js";var Q=2;function X(e, a){const r=[];for(const t of a){const n=new G(t);if(n.amount!==1)throw new Error("SGS cannot handle def moves with an amount other than 1 yet.");let i=e.identityTransformation();for(let f=1; i=i.applyMove(n),!i.isIdentityTransformation(); f++)r.push({move:n.modified({amount:f}),transformation:i})}return r}var g=class{constructor(e, a, r){this.kpuzzle=e,this.sgs=a,this.searchMoves=X(this.kpuzzle,r??Object.keys(this.kpuzzle.definition.moves))}async solve(e, a=Q, r){const t=e.experimentalToTransformation();if(!t)throw new Error("distinguishable pieces are not supported in tremble solver yt");let n=null,i=1e6;const f=(l, y, s)=>{if(y===0){const c=this.sgsPhaseSolve(l,i);if(!c)return;const w=s.concat(c).experimentalSimplify({cancel:{directional:"any-direction",puzzleSpecificModWrap:"canonical-centered"},puzzleSpecificSimplifyOptions:{quantumMoveOrder:r}}),m=$(w);(n===null||m<i)&&(n=w,i=m);return}for(const c of this.searchMoves)f(l.applyTransformation(c.transformation),y-1,s.concat([c.move]))};for(let l=0; l<=a; l++)f(t,l,new _);if(n===null)throw new Error("SGS search failed.");return n}sgsPhaseSolve(e, a){const r=new V;let t=e;for(const n of this.sgs.ordering){const i=n.pieceOrdering;let f="";const l=t.invert();for(let s=0; s<i.length; s++){const c=i[s],w=c.orbitName,m=c.permutationIdx;f+=` ${l.transformationData[w].permutation[m]} ${l.transformationData[w].orientationDelta[m]}`}const y=n.lookup[f];if(!y)throw new Error("Missing algorithm in sgs or esgs?");if(r.experimentalPushAlg(y.alg),r.experimentalNumAlgNodes()>=a)return null;t=t.applyTransformation(y.transformation);for(let s=0; s<i.length; s++){const c=i[s],w=c.orbitName,m=c.permutationIdx;if(t.transformationData[w].permutation[m]!==m||t.transformationData[w].orientationDelta[m]!==0)throw new Error("bad SGS :-(")}}return r.toAlg()}},k=v(async()=>h(()=>import("dist/assets/twsearch-ITWEA5PO.3kmZnQFV.js"),__vite__mapDeps([0,1,2])));async function L(e, a, r){const{wasmTwsearch:t}=await k;return t(e,a,r)}async function Y(e){const{wasmRandomScrambleForEvent:a}=await k;return a(e)}var S=v(()=>h(()=>import("dist/assets/search-dynamic-sgs-side-events-FTWMZ5ZJ.Bl7JTvk3.js"),__vite__mapDeps([3,1,2,4]))),z=null;async function Z(){return z||(z=(async()=>{const e=await(await S).cachedData222();return new g(await b["2x2x2"].kpuzzle(),e,"URFLBD".split(""))})())}async function ee(){await Z()}async function ae(e){return u(),L((await U.kpuzzle()).definition,e,{generatorMoves:"UFLR".split("")})}var A=v(()=>h(()=>import("dist/assets/search-dynamic-solve-4x4x4-6MKLH6KJ.DPFmgJ2q.js"),__vite__mapDeps([5,1,2]))),re=[[null,"x","x2","x'","z","z'"],[null,"y","y2","y'"]];async function te(){return(await A).initialize()}async function F(){return u(),(await A).random444Scramble()}async function ne(){return H(await F(),re)}var ie=v(()=>h(()=>import("dist/assets/search-dynamic-solve-fto-5YRST2XM.BfTPKpw-.js"),__vite__mapDeps([6,1,2])));v(()=>h(()=>import("dist/assets/search-dynamic-sgs-unofficial-ZYGVRJQK.Bor0WlVl.js"),__vite__mapDeps([7,4,1,2])));async function oe(){return u(),new _(await(await ie).getRandomFTOScramble())}var ce=v(()=>h(()=>import("dist/assets/search-dynamic-solve-kilominx-W64XQPBF.qmU3GRnW.js"),__vite__mapDeps([8,1,2])));async function se(){return u(),(await ce).getRandomKilominxScramble()}var le=v(()=>h(()=>import("dist/assets/search-dynamic-solve-master_tetraminx-3D4MBF3V.Bq9ColBv.js"),__vite__mapDeps([9,1,2])));async function me(){return u(),new _(await(await le).randomMasterTetraminxScrambleString())}var ue=2,P=null;async function fe(){return P||(P=(async()=>{const e=await(await S).cachedSGSDataMegaminx();return new g(await(await S).cachedMegaminxKPuzzleWithoutMO(),e,["U","R","F","L","BR","BL","FR","FL","DR","DL","B","D"])})())}async function we(e){u();const a=await fe(),r=structuredClone(e.patternData);r.CENTERS.orientation=new Array(12).fill(0);const t=new d(await(await S).cachedMegaminxKPuzzleWithoutMO(),r);return await a.solve(t,ue,()=>5)}var de=3,x=null;async function Se(){return x||(x=(async()=>{const e=await(await S).sgsDataPyraminx();return new g(await b.pyraminx.kpuzzle(),e,"RLUB".split(""))})())}async function ve(e){return u(),await(await Se()).solve(e,de,()=>3)}var he=v(()=>h(()=>import("dist/assets/search-dynamic-sgs-unofficial-ZYGVRJQK.Bor0WlVl.js"),__vite__mapDeps([7,4,1,2])));async function be(){return u(),(await he).getRandomRediCubeScramble()}var ye=3,M=null;async function ge(){return M||(M=(async()=>{const e=await(await S).sgsDataSkewb();return new g(await(await S).skewbKPuzzleWithoutMOCached(),e,"RLUB".split(""))})())}async function Ee(e){return new d(await(await S).skewbKPuzzleWithoutMOCached(),{CORNERS:e.patternData.CORNERS,CENTERS:{pieces:e.patternData.CENTERS.pieces,orientation:new Array(6).fill(0)}})}async function Te(e){return u(),await(await ge()).solve(await Ee(e),ye, t=>t.family==="y"?4:3)}var pe=1e3;B(!0);var C=!0;function _e(e){C=e}function R(){return(typeof performance>"u"?Date:performance).now()}async function o(e, a, r){if(!C)return a();const t=R(),n=a();n!=null&&n.then&&await n;const i=R();return console.warn(`${e}${r!=null&&r.isPrefetch?" (prefetched)":""}: ${Math.round(i-t)}ms`),n}var E=new Map,T=null,O;async function D(e, a){return O=(async()=>{await O;function r(){return o(`wasmRandomScrambleForEvent(${JSON.stringify(e)})`,()=>Y(e),{isPrefetch:a==null?void 0:a.isPrefetch})}switch(e){case"222":return(await r()).experimentalSimplify({puzzleSpecificSimplifyOptions:{quantumMoveOrder:()=>4}});case"555":case"666":case"777":case"333fm":case"minx":case"pyram":case"skewb":case"sq1":case"555bf":case"baby_fto":return r();case"333":case"333oh":case"333ft":return o("random333Scramble",W,{isPrefetch:a==null?void 0:a.isPrefetch});case"333bf":case"333mbf":return o("random333OrientedScramble",j);case"444":return o("random444Scramble",F,{isPrefetch:a==null?void 0:a.isPrefetch});case"444bf":return o("random444OrientedScramble",ne);case"fto":return o("randomFTOScramble",oe,{isPrefetch:a==null?void 0:a.isPrefetch});case"master_tetraminx":return o("randomMasterTetraminxScramble",me);case"kilominx":return o("randomKilominxScramble",se,{isPrefetch:a==null?void 0:a.isPrefetch});case"redi_cube":return o("randomRediCubeScramble",be,{isPrefetch:a==null?void 0:a.isPrefetch});default:throw new Error(`unsupported event: ${e}`)}})()}var p="auto",I={initialize:async e=>{switch(e){case"222":return o("preInitialize222",ee);case"333":case"333oh":case"333ft":return o("initialize333",q);case"444":return o("initialize444",te);default:throw new Error(`unsupported event: ${e}`)}},setScramblePrefetchLevel(e){p=e},randomScrambleForEvent:async e=>{let a=E.get(e);return a?E.delete(e):a=D(e),p!=="none"&&a.then(()=>{T&&clearTimeout(T),T=setTimeout(()=>{E.set(e,D(e,{isPrefetch:!0}))},p==="immediate"?0:pe)}),a},randomScrambleStringForEvent:async e=>(await I.randomScrambleForEvent(e)).toString(),solve333ToString:async e=>{const a=new d(await b["3x3x3"].kpuzzle(),e);return(await K(a)).toString()},solve222ToString:async e=>{const a=new d(await b["2x2x2"].kpuzzle(),e);return(await ae(a)).toString()},solveSkewbToString:async e=>{const a=new d(await b.skewb.kpuzzle(),e);return(await Te(a)).toString()},solvePyraminxToString:async e=>{const a=new d(await b.pyraminx.kpuzzle(),e);return(await ve(a)).toString()},solveMegaminxToString:async e=>{const a=new d(await b.megaminx.kpuzzle(),e);return(await we(a)).toString()},setDebugMeasurePerf:async e=>{_e(e)},solveTwsearchToString:async(e, a, r)=>{const t=new N(e),n=new d(t,a);return(await L(e,n,r)).toString()}};J(I);
